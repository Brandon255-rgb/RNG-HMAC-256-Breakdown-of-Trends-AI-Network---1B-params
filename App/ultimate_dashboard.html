<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supreme AI Betting Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #0F212E, #1A2C38, #0F212E);
            background-attachment: fixed;
            color: #e4e6ea;
            overflow-x: hidden;
            line-height: 1.6;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 25% 25%, rgba(31, 255, 32, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(16, 94, 180, 0.1) 0%, transparent 50%);
            z-index: -1;
        }

        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(31, 255, 32, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(31, 255, 32, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: -1;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            background: rgba(26, 44, 56, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(31, 255, 32, 0.15);
            border-radius: 10px;
            padding: 24px;
            margin-bottom: 32px;
            text-align: center;
        }

        .header-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .header-logo svg {
            filter: drop-shadow(0 0 8px rgba(31, 255, 32, 0.3));
        }

        .header h1 {
            font-size: 32px;
            font-weight: 700;
            color: #1FFF20;
            margin: 0;
        }

        .header p {
            font-size: 16px;
            color: #9ca3af;
            margin-bottom: 20px;
        }

        .mode-toggle {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 16px;
            margin-top: 16px;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: rgba(55, 65, 81, 0.5);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .toggle-switch.real-money {
            background: rgba(239, 68, 68, 0.3);
            border-color: rgba(239, 68, 68, 0.5);
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 26px;
            height: 26px;
            background: #ffffff;
            border-radius: 50%;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch.real-money .toggle-slider {
            transform: translateX(30px);
        }

        .mode-label {
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            transition: color 0.3s ease;
        }

        .mode-label.active {
            color: #34d399;
        }

        .mode-label.active.real {
            color: #ef4444;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: rgba(26, 35, 50, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.15);
            border-radius: 12px;
            padding: 24px;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            border-color: rgba(59, 130, 246, 0.3);
            transform: translateY(-1px);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .stat-title {
            font-size: 12px;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 4px;
        }

        .stat-change {
            font-size: 12px;
            font-weight: 500;
        }

        .stat-change.positive {
            color: #10b981;
        }

        .stat-change.negative {
            color: #ef4444;
        }

        .control-panel {
            background: rgba(26, 35, 50, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.15);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .control-title {
            font-size: 18px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 24px;
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .form-label {
            font-size: 12px;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-input, .form-select {
            background: rgba(55, 65, 81, 0.4);
            border: 1px solid rgba(75, 85, 99, 0.3);
            border-radius: 6px;
            padding: 10px 12px;
            color: #ffffff;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: rgba(59, 130, 246, 0.5);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .button-group {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: #ffffff;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: #ffffff;
        }

        .btn-success:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: #ffffff;
        }

        .btn-danger:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .btn-secondary {
            background: rgba(55, 65, 81, 0.6);
            color: #d1d5db;
            border: 1px solid rgba(75, 85, 99, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(75, 85, 99, 0.6);
            border-color: rgba(107, 114, 128, 0.4);
        }

        /* Oracle Auto System Styles */
        .btn-oracle {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: #ffffff;
            border: none;
        }

        .btn-oracle:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }

        .btn-advanced {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: #ffffff;
            border: none;
        }

        .btn-advanced:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }

        .mode-toggle-section {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
            padding: 16px;
            background: rgba(31, 41, 55, 0.5);
            border-radius: 8px;
            border: 1px solid rgba(75, 85, 99, 0.2);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 120px;
            height: 34px;
            cursor: pointer;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-radius: 34px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 2px;
            overflow: hidden;
        }

        .toggle-switch input:checked + .toggle-slider {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .toggle-slider:before {
            content: "";
            position: absolute;
            height: 26px;
            width: 50px;
            left: 4px;
            bottom: 4px;
            background: #ffffff;
            border-radius: 26px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(56px);
        }

        .toggle-label {
            color: #ffffff;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            z-index: 2;
            padding: 0 8px;
            transition: all 0.3s ease;
        }

        .mode-status {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #10b981;
            font-size: 14px;
            font-weight: 500;
        }

        .oracle-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: rgba(31, 41, 55, 0.6);
            border: 1px solid rgba(75, 85, 99, 0.2);
            border-radius: 8px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.2s ease;
        }

        .stat-card:hover {
            border-color: rgba(139, 92, 246, 0.3);
            background: rgba(31, 41, 55, 0.8);
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            font-size: 18px;
        }

        .stat-content {
            flex: 1;
        }

        .stat-label {
            color: #9ca3af;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .stat-value {
            color: #ffffff;
            font-size: 14px;
            font-weight: 600;
        }

        .oracle-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 24px;
        }

        .demo-progress {
            background: rgba(31, 41, 55, 0.6);
            border: 1px solid rgba(75, 85, 99, 0.2);
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            color: #e5e7eb;
            font-weight: 500;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(75, 85, 99, 0.3);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 16px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border-radius: 4px;
            width: 0%;
            transition: width 0.3s ease;
        }

        .analysis-details {
            display: grid;
            gap: 8px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #d1d5db;
            font-size: 14px;
        }

        .detail-item span:first-child {
            color: #9ca3af;
            font-weight: 500;
        }

        .detail-item span:last-child {
            color: #8b5cf6;
            font-weight: 600;
        }

        .charts-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .chart-container {
            background: rgba(26, 35, 50, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.15);
            border-radius: 12px;
            padding: 20px;
            height: 350px;
        }

        .chart-title {
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 16px;
        }

        .predictions-panel {
            background: rgba(26, 35, 50, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.15);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .prediction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(75, 85, 99, 0.2);
        }

        .prediction-item:last-child {
            border-bottom: none;
        }

        .prediction-label {
            font-size: 12px;
            color: #6b7280;
            font-weight: 600;
            text-transform: uppercase;
        }

        .prediction-value {
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
        }

        .confidence-bar {
            width: 80px;
            height: 3px;
            background: rgba(75, 85, 99, 0.3);
            border-radius: 2px;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
            transition: width 0.3s ease;
        }

        .logs-panel {
            background: rgba(26, 35, 50, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.15);
            border-radius: 12px;
            padding: 20px;
            height: 250px;
            overflow-y: auto;
        }

        .log-entry {
            padding: 4px 0;
            border-bottom: 1px solid rgba(75, 85, 99, 0.1);
            font-size: 12px;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
        }

        .log-time {
            color: #6b7280;
        }

        .log-message {
            color: #d1d5db;
        }

        .status-indicator {
            display: inline-block;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            margin-right: 6px;
        }

        .status-online {
            background: #10b981;
        }

        .status-offline {
            background: #6b7280;
        }

        .status-error {
            background: #ef4444;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(26, 35, 50, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 8px;
            padding: 12px 16px;
            color: #ffffff;
            font-size: 13px;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
            max-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-color: rgba(16, 185, 129, 0.5);
        }

        .notification.error {
            border-color: rgba(239, 68, 68, 0.5);
        }

        .notification.warning {
            border-color: rgba(245, 158, 11, 0.5);
        }

        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .control-grid {
                grid-template-columns: 1fr;
            }
            
            .charts-section {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }

        /* New Stake-Style Interface Styles */
        .top-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .balance-toggle {
            display: flex;
            align-items: center;
            gap: 0;
            margin-left: auto;
            margin-right: 25%;
        }

        .currency-button {
            background: #374151;
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 8px 0 0 8px;
            font-family: inherit;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
        }

        .currency-button:hover {
            background: #4b5563;
        }

        .balance-display {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .balance-amount {
            color: white;
            font-weight: 600;
            max-width: 16ch;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .currency-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: 8px;
            margin-top: 4px;
            z-index: 1000;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .currency-dropdown.hidden {
            display: none;
        }

        .currency-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .currency-option:hover {
            background: #374151;
        }

        .currency-option span:last-child {
            margin-left: auto;
            font-size: 12px;
            color: #9ca3af;
        }

        .wallet-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 0 8px 8px 0;
            font-family: inherit;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .wallet-button:hover {
            background: #2563eb;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #10b981;
            transition: 0.3s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: 0.3s;
        }

        input:checked + .slider {
            background-color: #ef4444;
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        .game-frame {
            background: rgba(26, 35, 50, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.15);
            border-radius: 12px;
            margin-bottom: 32px;
            overflow: hidden;
        }

        .game-sidebar {
            width: 300px;
            background: rgba(15, 20, 25, 0.8);
            border-right: 1px solid rgba(75, 85, 99, 0.2);
            padding: 20px;
            max-height: 646px;
            overflow-y: auto;
        }

        .game-tabs {
            margin-bottom: 24px;
        }

        .tabs-wrapper {
            background: rgba(55, 65, 81, 0.5);
            border-radius: 8px;
            padding: 4px;
            display: flex;
            gap: 4px;
        }

        .tab-button {
            flex: 1;
            background: transparent;
            color: #9ca3af;
            border: none;
            padding: 12px 16px;
            border-radius: 6px;
            font-family: inherit;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .tab-button:hover {
            background: rgba(75, 85, 99, 0.4);
            color: white;
        }

        .tab-button.active {
            background: #374151;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .bet-input-label {
            display: flex;
            flex-direction: column-reverse;
            margin-bottom: 16px;
        }

        .input-wrap {
            position: relative;
        }

        .input-content {
            position: relative;
            display: flex;
            align-items: center;
            background: rgba(55, 65, 81, 0.6);
            border: 1px solid rgba(75, 85, 99, 0.3);
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .input-content:focus-within {
            border-color: rgba(59, 130, 246, 0.5);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .input {
            background: transparent;
            border: none;
            color: white;
            padding: 12px 16px;
            font-size: 14px;
            font-family: inherit;
            flex: 1;
            outline: none;
        }

        .input::placeholder {
            color: #6b7280;
        }

        .after-icon {
            padding: 0 12px;
            color: #9ca3af;
            display: flex;
            align-items: center;
        }

        .input-button-wrap {
            display: flex;
            gap: 4px;
            padding: 4px;
        }

        .amount-button {
            background: #374151;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .amount-button:hover {
            background: #4b5563;
        }

        .label-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .bet-label {
            font-size: 12px;
            font-weight: 600;
            color: #e5e7eb;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .currency-conversion {
            font-size: 12px;
            color: #9ca3af;
        }

        .bet-button {
            width: 100%;
            background: #22c55e;
            color: #000;
            border: none;
            padding: 16px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 16px 0;
            box-shadow: 0 4px 8px rgba(34, 197, 94, 0.2);
        }

        .bet-button:hover {
            background: #16a34a;
            transform: translateY(-1px);
        }

        .bet-button:disabled {
            background: #6b7280;
            color: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }

        .profit {
            margin-top: 16px;
        }

        .game-content {
            flex: 1;
            padding: 20px;
            background: rgba(15, 20, 25, 0.4);
        }

        .dice-content {
            margin: 40px 0;
        }

        .dice-wrap {
            max-width: 730px;
            margin: 0 auto;
            position: relative;
        }

        .scale-wrap {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            position: relative;
        }

        .scale-content {
            position: absolute;
            transform: translateX(-50%);
        }

        .scale-value {
            font-size: 14px;
            font-weight: 600;
            color: #9ca3af;
        }

        .dice-content-inner {
            position: relative;
            height: 80px;
            margin: 20px 0;
        }

        .range {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 8px;
            background: #374151;
            border-radius: 4px;
            overflow: hidden;
        }

        .lower {
            position: absolute;
            left: 0;
            height: 100%;
            background: #ef4444;
            width: 49.5%;
        }

        .higher {
            position: absolute;
            right: 0;
            height: 100%;
            background: #22c55e;
        }

        .dice-slider {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            transform: translateY(-50%);
            height: 8px;
            background: transparent;
            outline: none;
            appearance: none;
            -webkit-appearance: none;
            cursor: pointer;
            z-index: 10;
        }

        .dice-slider::-webkit-slider-thumb {
            appearance: none;
            -webkit-appearance: none;
            width: 36px;
            height: 36px;
            background: #3b82f6;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 3px solid white;
        }

        .dice-slider::-moz-range-thumb {
            width: 36px;
            height: 36px;
            background: #3b82f6;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 3px solid white;
        }

        .dice-container {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .dice {
            width: 40px;
            height: 40px;
        }

        .dice-result {
            font-size: 12px;
            font-weight: 600;
            color: #e5e7eb;
            background: rgba(0, 0, 0, 0.6);
            padding: 4px 8px;
            border-radius: 4px;
        }

        .game-footer {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 40px;
        }

        .footer-input-label {
            display: flex;
            flex-direction: column-reverse;
        }

        .auto-bet-controls, .advanced-controls {
            padding: 20px 0;
        }

        .content {
            display: flex;
        }

        .right-align {
            margin-left: auto;
        }

        .labels {
            margin-bottom: 8px;
        }

        @media (max-width: 1024px) {
            .content {
                flex-direction: column;
            }
            
            .game-sidebar {
                width: 100%;
                max-height: none;
            }
            
            .game-footer {
                grid-template-columns: 1fr;
            }
        }

        /* Betting Interface Styles */
        .betting-interface {
            background: #1A2C38;
            border: 1px solid #105EB4;
            border-radius: 10px;
            padding: 24px;
            margin: 20px 0;
        }

        .betting-tabs {
            display: flex;
            background: #0F212E;
            border-radius: 8px;
            padding: 4px;
            margin-bottom: 20px;
        }

        .tab-button {
            flex: 1;
            padding: 10px 16px;
            background: transparent;
            border: none;
            color: #888;
            cursor: pointer;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .tab-button.active {
            background: #1FFF20;
            color: #000;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .betting-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-label {
            font-size: 12px;
            color: #888;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .input-group {
            display: flex;
            align-items: center;
            background: #0F212E;
            border: 1px solid #105EB4;
            border-radius: 8px;
            overflow: hidden;
        }

        .input-group:focus-within {
            border-color: #1FFF20;
        }

        .input-group input {
            flex: 1;
            padding: 12px 16px;
            background: transparent;
            border: none;
            color: #ffffff;
            font-size: 14px;
            outline: none;
        }

        .currency-icon-input {
            padding: 12px;
            background: #1A2C38;
            border-right: 1px solid #105EB4;
            display: flex;
            align-items: center;
        }

        .amount-buttons {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }

        .amount-btn {
            padding: 6px 12px;
            background: #0F212E;
            border: 1px solid #105EB4;
            border-radius: 6px;
            color: #1FFF20;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .amount-btn:hover {
            background: #105EB4;
            border-color: #1FFF20;
        }

        .conversion-amount {
            font-size: 11px;
            color: #888;
            margin-top: 4px;
        }

        /* Dice Game Styles */
        .dice-game {
            background: #0F212E;
            border: 1px solid #105EB4;
            border-radius: 10px;
            padding: 24px;
            margin: 20px 0;
        }

        .dice-slider-container {
            margin: 20px 0;
            position: relative;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 12px;
            color: #888;
        }

        .slider-track {
            position: relative;
            height: 60px;
        }

        .dice-slider {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            transform: translateY(-50%);
            height: 8px;
            background: transparent;
            outline: none;
            appearance: none;
            -webkit-appearance: none;
            cursor: pointer;
            z-index: 10;
        }

        .dice-slider::-webkit-slider-thumb {
            appearance: none;
            -webkit-appearance: none;
            width: 36px;
            height: 36px;
            background: #1FFF20;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid #0F212E;
            box-shadow: 0 2px 8px rgba(31, 255, 32, 0.3);
        }

        .dice-slider::-moz-range-thumb {
            width: 36px;
            height: 36px;
            background: #1FFF20;
            border-radius: 50%;
            border: 3px solid #0F212E;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(31, 255, 32, 0.3);
        }

        .dice-range-visualization {
            display: flex;
            height: 40px;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 10px;
        }

        .range-section {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .lower-range {
            background: #e74c3c;
            color: white;
        }

        .higher-range {
            background: #1FFF20;
            color: #000;
        }

        .dice-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 16px;
            margin: 20px 0;
        }

        .dice-input-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .roll-toggle-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        .roll-toggle-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: #105EB4;
            border: none;
            border-radius: 4px;
            width: 24px;
            height: 24px;
            color: #1FFF20;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .roll-toggle-btn:hover {
            background: #1FFF20;
            color: #000;
        }

        .dice-input {
            padding: 12px 36px 12px 12px;
            background: #0F212E;
            border: 1px solid #105EB4;
            border-radius: 8px;
            color: #ffffff;
            font-size: 14px;
            text-align: center;
            outline: none;
        }

        .dice-input:focus {
            border-color: #1FFF20;
        }

        .place-bet-button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(45deg, #1FFF20, #105EB4);
            border: none;
            border-radius: 8px;
            color: #000;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 20px;
        }

        .place-bet-button:hover {
            background: linear-gradient(45deg, #105EB4, #1FFF20);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(31, 255, 32, 0.3);
        }

        .place-bet-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .dice-container {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #1A2C38;
            border-radius: 8px;
        }

        .dice-container.is-hidden {
            display: none;
        }

        .dice-result {
            font-size: 48px;
            font-weight: bold;
            margin: 10px 0;
        }

        .dice-result.win {
            color: #1FFF20;
            text-shadow: 0 0 10px rgba(31, 255, 32, 0.5);
        }

        .dice-result.loss {
            color: #e74c3c;
            text-shadow: 0 0 10px rgba(231, 76, 60, 0.5);
        }

        /* Auto/Advanced placeholder styles */
        .auto-betting-placeholder,
        .advanced-placeholder {
            text-align: center;
            padding: 40px;
            color: #888;
            font-style: italic;
        }

        /* Advanced AI System Styles */
        .advanced-ai-system {
            padding: 20px;
            color: #e0e0e0;
        }

        .ai-predictions-section {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid #333;
            margin-bottom: 20px;
        }

        .predictions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .prediction-card {
            background: linear-gradient(135deg, #2d2d44, #1f1f3a);
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #404040;
            text-align: center;
        }

        .prediction-header {
            font-size: 12px;
            color: #999;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .prediction-main-value {
            font-size: 24px;
            font-weight: bold;
            color: #1FFF20;
            margin-bottom: 8px;
        }

        .prediction-confidence {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .confidence-percent {
            font-weight: bold;
            color: #00ffff;
        }

        .confidence-bar {
            width: 100%;
            height: 4px;
            background: #333;
            border-radius: 2px;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ffd93d, #6bcf7f);
            transition: width 0.5s ease;
        }

        .prediction-sub-text {
            font-size: 11px;
            color: #aaa;
        }

        .betting-recommendations,
        .pattern-analysis {
            background: linear-gradient(135deg, #2a2a3e, #1e1e32);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 16px;
            border: 1px solid #404040;
        }

        .recommendation-grid,
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .recommendation-item,
        .analysis-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .recommendation-value,
        .analysis-value {
            font-weight: bold;
            color: #1FFF20;
        }

        .risk-low { color: #4CAF50 !important; }
        .risk-medium { color: #FF9800 !important; }
        .risk-high { color: #f44336 !important; }

        .recommendation-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .analysis-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            margin-top: 16px;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4CAF50;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .last-update {
            font-size: 11px;
            color: #888;
        }

        /* Stake-style Rolling Results Banner */
        .results-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(135deg, #0F212E, #1A2C38);
            border-bottom: 1px solid #105EB4;
            z-index: 1000;
            overflow: hidden;
            display: flex;
            align-items: center;
            padding: 0 20px;
        }

        .results-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                rgba(31, 255, 32, 0.05) 0%, 
                transparent 50%, 
                rgba(16, 94, 180, 0.05) 100%);
        }

        .results-banner-label {
            font-size: 12px;
            color: #888;
            font-weight: 600;
            margin-right: 20px;
            min-width: 80px;
            position: relative;
            z-index: 2;
        }

        .results-scroll-container {
            flex: 1;
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .results-scroll {
            display: flex;
            align-items: center;
            height: 100%;
            animation: scrollResults 0.5s ease-out;
            gap: 8px;
        }

        @keyframes scrollResults {
            from {
                transform: translateX(60px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .result-bubble {
            min-width: 50px;
            height: 36px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 700;
            color: white;
            position: relative;
            overflow: hidden;
            animation: resultPop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes resultPop {
            0% {
                transform: scale(0) rotate(-180deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.2) rotate(-90deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        .result-bubble.win {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.4);
        }

        .result-bubble.loss {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.4);
        }

        .result-bubble::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.2) 0%, transparent 100%);
            border-radius: inherit;
        }

        .result-bubble.exit {
            animation: resultExit 0.4s ease-in forwards;
        }

        @keyframes resultExit {
            to {
                transform: translateX(-100px);
                opacity: 0;
            }
        }

        /* Toast Notification System */
        .toast-container {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 1001;
            pointer-events: none;
        }

        .toast {
            background: rgba(26, 35, 50, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 8px;
            padding: 16px 20px;
            margin-bottom: 12px;
            color: white;
            font-size: 14px;
            font-weight: 500;
            max-width: 350px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            border-left: 4px solid #3b82f6;
            transform: translateX(400px);
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            pointer-events: auto;
            position: relative;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            border-left-color: #22c55e;
            background: rgba(34, 197, 94, 0.1);
        }

        .toast.error {
            border-left-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .toast.warning {
            border-left-color: #f59e0b;
            background: rgba(245, 158, 11, 0.1);
        }

        .toast.info {
            border-left-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }

        .toast-icon {
            display: inline-block;
            margin-right: 8px;
            font-size: 16px;
        }

        .toast-close {
            position: absolute;
            top: 8px;
            right: 8px;
            background: none;
            border: none;
            color: #9ca3af;
            cursor: pointer;
            font-size: 18px;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .toast-close:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }

        /* Adjust main container to account for results banner */
        .container {
            margin-top: 60px;
        }

        /* Enhanced Stake-style Dice Game */
        .stake-dice-game {
            background: #0F212E;
            border: 1px solid #105EB4;
            border-radius: 12px;
            padding: 24px;
            margin: 20px 0;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .game-title {
            font-size: 18px;
            font-weight: 700;
            color: #1FFF20;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .game-stats {
            display: flex;
            gap: 20px;
            font-size: 12px;
            color: #888;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 16px;
            font-weight: 700;
            color: #1FFF20;
            display: block;
        }

        .dice-controls-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .bet-controls {
            background: #1A2C38;
            border: 1px solid #105EB4;
            border-radius: 8px;
            padding: 20px;
        }

        .dice-visualization {
            background: #1A2C38;
            border: 1px solid #105EB4;
            border-radius: 8px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 200px;
        }

        .dice-range-slider {
            position: relative;
            height: 80px;
            margin: 20px 0;
        }

        .range-track {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 8px;
            background: #374151;
            border-radius: 4px;
            transform: translateY(-50%);
            overflow: hidden;
        }

        .range-fill-under {
            position: absolute;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, #ef4444, #dc2626);
            transition: width 0.3s ease;
        }

        .range-fill-over {
            position: absolute;
            right: 0;
            height: 100%;
            background: linear-gradient(90deg, #16a34a, #22c55e);
            transition: width 0.3s ease;
        }

        .dice-slider-input {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            transform: translateY(-50%);
            height: 8px;
            background: transparent;
            outline: none;
            appearance: none;
            -webkit-appearance: none;
            cursor: pointer;
            z-index: 10;
        }

        .dice-slider-input::-webkit-slider-thumb {
            appearance: none;
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            background: #1FFF20;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid #0F212E;
            box-shadow: 0 2px 8px rgba(31, 255, 32, 0.4);
        }

        .dice-slider-input::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: #1FFF20;
            border-radius: 50%;
            border: 3px solid #0F212E;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(31, 255, 32, 0.4);
        }

        .range-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 16px;
            font-size: 12px;
            color: #888;
        }

        .win-chance-display {
            text-align: center;
            margin-top: 16px;
        }

        .win-chance-value {
            font-size: 32px;
            font-weight: 700;
            color: #1FFF20;
            margin-bottom: 4px;
        }

        .win-chance-label {
            font-size: 12px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
    </style>
</head>
<body>
    <div class="grid-overlay"></div>
    
    <!-- Stake-style Rolling Results Banner -->
    <div class="results-banner">
        <div class="results-banner-label">LIVE RESULTS</div>
        <div class="results-scroll-container">
            <div class="results-scroll" id="resultsScroll">
                <!-- Results will be populated here -->
            </div>
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div class="toast-container" id="toastContainer">
        <!-- Toasts will be populated here -->
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-logo">
                <svg width="80" height="40" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                    <g id="Layer_5">
                        <path fill="#1FFF20" d="M31.47,58.5c-.1-25.81,16.42-40.13,46.75-40.23,21.82-.08,25.72,14.2,25.72,19.39,0,9.94-14.06,20.48-14.06,20.48,0,0,.78,6.19,12.85,6.14,12.07-.05,23.83-8.02,23.76-27.96-.06-22.91-24.06-33.38-47.78-33.29C58.87,3.09,6.24,5.88,6.42,58.13c.18,46.41,87.76,50.5,87.83,80.21.12,32.27-36.08,40.96-48.33,40.96s-17.23-8.67-17.25-13.43c-.09-26.13,25.92-33.41,25.92-33.41,0-1.95-1.52-10.64-11.59-10.6-25.95.05-36.28,22.36-36.21,44.14.07,18.53,13.16,30.09,32.94,30.01,37.82-.14,80.46-18.59,80.3-59.56-.14-38.32-88.46-48.33-88.57-77.96Z"></path>
                        <path fill="#1FFF20" d="M391.96,161.17c-.3-.73-1.15-.56-2.27.37-4.29,3.54-14.1,13.56-37.06,13.65-41.85.16-49.12-68.83-49.12-68.83,0,0,31.9-23.81,36.88-33.42,4.98-9.61-10.87-11.7-10.87-11.7,0,0-22.31,27.15-38.13,35.1,1.72-11.81,13.42-38.72,14.09-54.2.67-15.48-18.63-11.7-21.72-10.22,0,6.76-17.06,68.1-23.27,101.82-3.66,5.85-8.88,12.54-13.56,12.55-2.71,0-3.71-5.02-3.73-12.22,0-9.99,5.5-25.99,5.46-35.71,0-6.73-3.09-7.13-5.75-7.12-.58,0-3.77.09-4.36.09-6.83,0-4.58-5.85-10.73-5.79-18.8.07-42.75,20.59-43.79,51.57-6.35,4.2-15.23,9.5-19.77,9.52-4.76,0-5.94-4.4-5.95-8.2,0-6.68,10.8-46.37,10.8-46.37,0,0,13.76-3.53,19.77-4.69,4.54-.89,5.85-1.22,7.62-3.41s5.22-6.73,8.01-10.8c2.79-4.08.05-7.23-5.11-7.21-6.77,0-24.88,4.29-24.88,4.29,0,0,8.7-37.5,8.69-38.26s-.98-1.16-2.45-1.15c-3.3,0-9.18,1.77-12.94,3.12-5.76,2.06-10.45,9.12-11.4,12.4s-7.46,29.02-7.46,29.02c0,0-34.88,12.04-39.65,13.85-.29.1-.49.37-.49.68s3.99,15.6,12.17,15.54c5.85,0,23.04-7.04,23.04-7.04,0,0-8.83,35.1-8.78,46.81,0,7.51,3.54,16.3,18.21,16.26,13.65,0,25.6-7.05,32.29-11.96,3.66,9.25,12.3,11.79,18.2,11.77,13.22,0,23.4-10.55,24.71-11.96,1.72,4.06,5.76,11.85,15.01,11.82,5.23,0,10.64-5.85,14.63-11.53-.08,1.18-.06,2.36.05,3.54,1.6,14.55,23.2,6,24.38,3.97.73-10.52.27-32.03,4.48-45.31,5.58,45.3,26.74,75.78,64.78,75.64,21.27-.08,32.18-6.19,36.69-11.23,3.69-4.08,4.94-9.81,3.29-15.06ZM209.45,146.23c-18.26.07,5.59-47.27,21.17-47.33.02,6.1-.32,47.26-21.17,47.33Z"></path>
                        <path fill="#1FFF20" d="M357.73,160.74c16.49-.06,29.25-10.91,31.59-14.44,3.02-4.59-3.51-11.53-5.59-11.41-5.21,4.98-10.65,11.01-22.87,11.05-14.38.06-11.13-15.77-11.13-15.77,0,0,27.68,3.58,38.81-16.32,3.56-6.37,3.71-15.17,2.27-18.97s-9.49-10.81-22.3-9.75c-15.74,1.33-35.57,17.74-39.93,37.45-3.5,15.86,3.12,38.26,29.14,38.17ZM375.28,94.33c2.59-.09,2.36,4.18,1.67,8.65-.98,6.06-9.29,21.45-25.17,20.85,1.1-8.96,12.91-29.15,23.53-29.5h-.03Z"></path>
                    </g>
                </svg>
                <h1>Make AI Dashboard</h1>
            </div>
            <p>Professional trading interface with real-time analytics</p>
            
            <!-- Demo/Real Money Toggle -->
                    <div class="top-controls">
            <!-- Demo/Real Money Toggle -->
            <div class="mode-toggle">
                <span class="toggle-label">Demo</span>
                <label class="switch">
                    <input type="checkbox" id="modeToggle">
                    <span class="slider round"></span>
                </label>
                <span class="toggle-label">Real Money</span>
            </div>
            
            <!-- Currency Selection with Balance -->
            <div class="balance-toggle" data-testid="balance-toggle">
                <div class="coin-toggle">
                    <div class="wrapper currency-view-compact">
                        <div class="dropdown flex">
                            <button type="button" tabindex="0" class="currency-button" aria-label="Open Dropdown" data-testid="coin-toggle" data-active-currency="usdt">
                                <div class="wrap truncate">
                                    <div class="balance-display">
                                        <span class="balance-amount" id="currentBalance">0.00004897</span>
                                        <span class="currency-icon" title="usdt">
                                            <svg data-ds-icon="USDT" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                                                <path fill="#26A17B" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11"></path>
                                                <path fill="#fff" d="M13.322 12.95c-.076.005-.466.028-1.336.028-.694 0-1.183-.02-1.355-.029v.002c-2.673-.117-4.668-.583-4.668-1.14s1.995-1.021 4.668-1.14v1.817c.175.013.675.042 1.367.042.83 0 1.246-.034 1.324-.041v-1.817c2.667.119 4.657.584 4.657 1.14s-1.99 1.02-4.657 1.139m0-2.467V8.856h3.722v-2.48H6.909v2.48h3.722v1.626c-3.025.139-5.3.738-5.3 1.456s2.275 1.317 5.3 1.456v5.213h2.69v-5.214c3.02-.139 5.29-.738 5.29-1.455s-2.27-1.316-5.29-1.455"></path>
                                            </svg>
                                        </span>
                                        <svg data-ds-icon="ChevronDown" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                                            <path fill="currentColor" d="M17.293 8.293a1 1 0 1 1 1.414 1.414l-6 6a1 1 0 0 1-1.414 0l-6-6-.068-.076A1 1 0 0 1 6.63 8.225l.076.068L12 13.586z"></path>
                                        </svg>
                                    </div>
                                </div>
                            </button>
                            <!-- Currency Dropdown -->
                            <div id="currencyDropdown" class="currency-dropdown hidden">
                                <div class="currency-option" data-currency="usdt">
                                    <svg data-ds-icon="USDT" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                                        <path fill="#26A17B" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11"></path>
                                        <path fill="#fff" d="M13.322 12.95c-.076.005-.466.028-1.336.028-.694 0-1.183-.02-1.355-.029v.002c-2.673-.117-4.668-.583-4.668-1.14s1.995-1.021 4.668-1.14v1.817c.175.013.675.042 1.367.042.83 0 1.246-.034 1.324-.041v-1.817c2.667.119 4.657.584 4.657 1.14s-1.99 1.02-4.657 1.139m0-2.467V8.856h3.722v-2.48H6.909v2.48h3.722v1.626c-3.025.139-5.3.738-5.3 1.456s2.275 1.317 5.3 1.456v5.213h2.69v-5.214c3.02-.139 5.29-.738 5.29-1.455s-2.27-1.316-5.29-1.455"></path>
                                    </svg>
                                    <span>USDT</span>
                                    <span class="balance" id="usdtBalance">0.00004897</span>
                                </div>
                                <div class="currency-option" data-currency="btc">
                                    <svg data-ds-icon="BTC" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                                        <path fill="#F7931A" d="M23.638 14.904c-1.602 6.43-8.113 10.34-14.542 8.736C2.67 22.05-1.244 15.525.362 9.105 1.962 2.67 8.475-1.243 14.9.358c6.43 1.605 10.342 8.115 8.738 14.546z"></path>
                                        <path fill="#FFF" d="M16.103 10.626c.229-1.525-.934-2.345-2.525-2.892l.516-2.068-1.258-.314-.502 2.016c-.33-.083-.67-.16-1.008-.236l.505-2.027-1.259-.314-.515 2.068c-.274-.063-.542-.124-.803-.187v-.007l-1.735-.432-.334 1.343s.934.214.914.227c.51.127.602.465.586.732l-.587 2.357c.035.009.08.022.13.043l-.131-.033-.822 3.297c-.062.155-.22.39-.576.301.013.019-.914-.228-.914-.228l-.624 1.439 1.638.408c.305.077.603.157.896.232l-.52 2.088 1.258.314.515-2.067c.342.093.675.178 1 .256l-.513 2.058 1.259.314.52-2.084c2.14.405 3.75.242 4.426-1.694.545-1.555-.027-2.452-1.151-3.036.819-.189 1.436-.728 1.602-1.844zm-2.87 4.026c-.388 1.56-3.014.716-3.865.505l.689-2.761c.851.212 3.581.631 3.176 2.256zm.387-4.051c-.354 1.421-2.545.699-3.255.522l.625-2.506c.71.177 3.005.507 2.63 1.984z"></path>
                                    </svg>
                                    <span>BTC</span>
                                    <span class="balance" id="btcBalance">0.00000000</span>
                                </div>
                                <div class="currency-option" data-currency="eth">
                                    <svg data-ds-icon="ETH" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                                        <path fill="#627EEA" d="m11.944 17.97-4.788-7.13 4.788 2.855 4.788-2.855z"></path>
                                        <path fill="#8A92B2" d="m7.157 10.84 4.787 7.13V1z"></path>
                                        <path fill="#627EEA" d="M11.944 1v16.97l4.788-7.13z"></path>
                                        <path fill="#8A92B2" d="M11.944 20.31v2.69L7.157 13.07z"></path>
                                        <path fill="#627EEA" d="M11.944 23v-2.69L16.73 13.07z"></path>
                                    </svg>
                                    <span>ETH</span>
                                    <span class="balance" id="ethBalance">0.00000000</span>
                                </div>
                                <div class="currency-option" data-currency="doge">
                                    <svg data-ds-icon="DOGE" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none">
                                        <path fill="#C2A633" d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12z"></path>
                                        <path fill="#FFF" d="M10.069 16.74h2.964c3.226 0 5.084-1.707 5.084-4.71 0-3.003-1.858-4.71-5.084-4.71h-2.964v9.42zm1.903-1.692V9.415h.82c1.958 0 3.18.906 3.18 2.817 0 1.91-1.222 2.816-3.18 2.816h-.82z"></path>
                                        <path fill="#FFF" d="M8.718 7.32H6.815v9.42h1.903V7.32z"></path>
                                        <path fill="#FFF" d="M14.967 11.73h3.18v1.692h-3.18V11.73z"></path>
                                    </svg>
                                    <span>DOGE</span>
                                    <span class="balance" id="dogeBalance">0.00000000</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button type="button" tabindex="0" class="wallet-button" data-testid="wallet">
                    <span>Wallet</span>
                </button>
            </div>
        </div>

        <!-- Session Seeds Input Panel -->
        <div class="control-panel">
            <div class="control-title">
                <i class="fas fa-key"></i>
                Session Seeds for Enhanced Decryption
            </div>
            <p style="font-size: 13px; color: #9ca3af; margin-bottom: 20px;">
                Enter the session seeds to improve number prediction accuracy using HMAC-SHA256 calculations
            </p>
            
            <div class="control-grid" style="grid-template-columns: 1fr 1fr;">
                <div class="form-group">
                    <label class="form-label">Client Seed</label>
                    <input type="text" class="form-input" id="clientSeed" placeholder="Enter client seed (e.g., A1EnyBArgu)" maxlength="64">
                    <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">
                        Your chosen client seed for provably fair gaming
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Server Seed Hash</label>
                    <input type="text" class="form-input" id="serverSeedHash" placeholder="Enter server seed hash (SHA256)" maxlength="64">
                    <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">
                        Server seed hash (64 character hex string)
                    </div>
                </div>
            </div>
            
            <div class="control-grid" style="grid-template-columns: 1fr 1fr 2fr;">
                <div class="form-group">
                    <label class="form-label">Nonce</label>
                    <input type="number" class="form-input" id="nonceValue" placeholder="0" min="0" step="1">
                    <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">
                        Current bet number in session
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Total Bets Made</label>
                    <input type="number" class="form-input" id="totalBetsMade" placeholder="0" min="0" step="1" readonly>
                    <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">
                        Automatically tracked
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Revealed Server Seed (Optional)</label>
                    <input type="text" class="form-input" id="revealedServerSeed" placeholder="Enter if available for verification">
                    <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">
                        Only available after session ends - for verification
                    </div>
                </div>
            </div>
            
            <div class="button-group" style="margin-top: 20px;">
                <button class="btn btn-primary" id="updateSeedsBtn">
                    <i class="fas fa-sync-alt"></i>
                    Update Seeds
                </button>
                <button class="btn btn-success" id="calculateNextBtn">
                    <i class="fas fa-calculator"></i>
                    Calculate Next Numbers
                </button>
                <button class="btn btn-secondary" id="verifySeedsBtn">
                    <i class="fas fa-check-circle"></i>
                    Verify Seeds
                </button>
                <button class="btn btn-secondary" id="clearSeedsBtn">
                    <i class="fas fa-trash"></i>
                    Clear Seeds
                </button>
            </div>
            
            <!-- Seeds Status Panel -->
            <div style="margin-top: 20px; padding: 16px; background: rgba(55, 65, 81, 0.4); border: 1px solid rgba(75, 85, 99, 0.3); border-radius: 8px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <div class="form-label" style="margin: 0;">Seeds Status</div>
                    <span id="seedsStatus" class="status-indicator status-offline"></span>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; font-size: 12px;">
                    <div>
                        <span style="color: #9ca3af;">Client Seed:</span>
                        <div id="currentClientSeed" style="color: #1FFF20; font-family: monospace; word-break: break-all;">Not set</div>
                    </div>
                    <div>
                        <span style="color: #9ca3af;">Server Hash:</span>
                        <div id="currentServerHash" style="color: #1FFF20; font-family: monospace; word-break: break-all;">Not set</div>
                    </div>
                    <div>
                        <span style="color: #9ca3af;">Next Prediction:</span>
                        <div id="nextCalculatedNumber" style="color: #34d399; font-weight: 600; font-size: 14px;">--</div>
                    </div>
                    <div>
                        <span style="color: #9ca3af;">Confidence:</span>
                        <div id="seedConfidence" style="color: #34d399; font-weight: 600;">0%</div>
                    </div>
                </div>
                
                <!-- HMAC Calculation Results -->
                <div id="hmacResults" style="margin-top: 16px; display: none;">
                    <div class="form-label" style="margin-bottom: 8px;">HMAC-SHA256 Calculation Results</div>
                    <div style="background: rgba(15, 20, 25, 0.6); padding: 12px; border-radius: 6px; font-family: monospace; font-size: 11px;">
                        <div style="margin-bottom: 8px;">
                            <span style="color: #9ca3af;">HMAC Input:</span>
                            <div id="hmacInput" style="color: #e5e7eb; word-break: break-all;">--</div>
                        </div>
                        <div style="margin-bottom: 8px;">
                            <span style="color: #9ca3af;">HMAC Output:</span>
                            <div id="hmacOutput" style="color: #1FFF20; word-break: break-all;">--</div>
                        </div>
                        <div style="margin-bottom: 8px;">
                            <span style="color: #9ca3af;">Dice Roll (0-99.99):</span>
                            <div id="diceRollResult" style="color: #34d399; font-size: 14px; font-weight: 600;">--</div>
                        </div>
                        <div>
                            <span style="color: #9ca3af;">Next 5 Rolls:</span>
                            <div id="nextFiveRolls" style="color: #60a5fa;">--</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stake-Style Betting Interface -->
        <div class="betting-interface">
            <div class="betting-tabs">
                <button class="tab-button active">Auto</button>
                <button class="tab-button">Advanced</button>
            </div>
            
            <div class="tab-content active">
                <!-- Auto Betting Content -->
                <div class="auto-betting-controls">
                    <div class="control-group">
                        <label class="control-label">Base Bet Amount</label>
                        <div class="input-group">
                            <div class="currency-icon-input">
                                <svg data-ds-icon="USDT" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" id="autoBetCurrencyIcon">
                                    <path fill="#26A17B" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11"></path>
                                    <path fill="#fff" d="M13.322 12.95c-.076.005-.466.028-1.336.028-.694 0-1.183-.02-1.355-.029v.002c-2.673-.117-4.668-.583-4.668-1.14s1.995-1.021 4.668-1.14v1.817c.175.013.675.042 1.367.042.83 0 1.246-.034 1.324-.041v-1.817c2.667.119 4.657.584 4.657 1.14s-1.99 1.02-4.657 1.139m0-2.467V8.856h3.722v-2.48H6.909v2.48h3.722v1.626c-3.025.139-5.3.738-5.3 1.456s2.275 1.317 5.3 1.456v5.213h2.69v-5.214c3.02-.139 5.29-.738 5.29-1.455s-2.27-1.316-5.29-1.455"></path>
                                </svg>
                            </div>
                            <input type="number" id="autoBaseBet" placeholder="0.00000000" step="0.00000001" min="0" value="0.00000001" />
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">Auto Strategy</label>
                        <select id="autoStrategy" class="form-select">
                            <option value="martingale">Martingale (2x on Loss)</option>
                            <option value="fibonacci">Fibonacci Progression</option>
                            <option value="dAlembert">D'Alembert System</option>
                            <option value="flat">Flat Betting</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label class="control-label">Stop Conditions</label>
                        <div class="stop-conditions">
                            <div class="stop-condition">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="stopOnProfit">
                                    <span class="checkmark"></span>
                                    Stop on Profit
                                </label>
                                <input type="number" id="stopProfitAmount" placeholder="0.00000000" step="0.00000001" min="0" />
                            </div>
                            <div class="stop-condition">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="stopOnLoss">
                                    <span class="checkmark"></span>
                                    Stop on Loss
                                </label>
                                <input type="number" id="stopLossAmount" placeholder="0.00000000" step="0.00000001" min="0" />
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <div class="auto-betting-status">
                            <div class="status-indicator" id="autoBettingIndicator">
                                <span class="status-dot"></span>
                                <span id="autoBettingStatus">Stopped</span>
                            </div>
                            <div class="auto-stats">
                                <span>Bets: <span id="autoBetCount">0</span></span>
                                <span>P&L: <span id="autoPnL">+0.00000000</span></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="betting-actions">
                        <button id="startAutoBetting" class="btn btn-success">
                            <i class="fas fa-play"></i> Start Auto Betting
                        </button>
                        <button id="stopAutoBetting" class="btn btn-danger" style="display: none;">
                            <i class="fas fa-stop"></i> Stop Auto Betting
                        </button>
                    </div>
                </div>

                <!-- Dice Game Interface -->
                <div class="stake-dice-game">
                    <div class="game-header">
                        <div class="game-title">
                            <i class="fas fa-dice"></i>
                            Dice - Provably Fair
                        </div>
                        <div class="game-stats">
                            <div class="stat-item">
                                <span class="stat-value" id="totalPlayed">0</span>
                                <span>Played</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="totalWon">0</span>
                                <span>Won</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" id="winPercentage">0%</span>
                                <span>Win %</span>
                            </div>
                        </div>
                    </div>

                    <div class="dice-controls-container">
                        <!-- Left Panel: Bet Controls -->
                        <div class="bet-controls">
                            <div class="form-group" style="margin-bottom: 16px;">
                                <label class="control-label">Bet Amount</label>
                                <div class="input-group">
                                    <div class="currency-icon-input">
                                        <svg data-ds-icon="USDT" width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" id="stakeBetCurrencyIcon">
                                            <path fill="#26A17B" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11"></path>
                                            <path fill="#fff" d="M13.322 12.95c-.076.005-.466.028-1.336.028-.694 0-1.183-.02-1.355-.029v.002c-2.673-.117-4.668-.583-4.668-1.14s1.995-1.021 4.668-1.14v1.817c.175.013.675.042 1.367.042.83 0 1.246-.034 1.324-.041v-1.817c2.667.119 4.657.584 4.657 1.14s-1.99 1.02-4.657 1.139m0-2.467V8.856h3.722v-2.48H6.909v2.48h3.722v1.626c-3.025.139-5.3.738-5.3 1.456s2.275 1.317 5.3 1.456v5.213h2.69v-5.214c3.02-.139 5.29-.738 5.29-1.455s-2.27-1.316-5.29-1.455"></path>
                                        </svg>
                                    </div>
                                    <input type="number" id="stakeBetAmount" class="input" placeholder="0.00000000" step="0.00000001" min="0" />
                                </div>
                                <div class="amount-buttons">
                                    <button class="amount-btn" onclick="adjustStakeBetAmount(0.5)"></button>
                                    <button class="amount-btn" onclick="adjustStakeBetAmount(2)">2</button>
                                    <button class="amount-btn" onclick="setStakeBetAmount(0.00000001)">Min</button>
                                    <button class="amount-btn" onclick="setMaxStakeBetAmount()">Max</button>
                                </div>
                            </div>

                            <div class="form-group" style="margin-bottom: 16px;">
                                <label class="control-label">Multiplier</label>
                                <div class="input-group">
                                    <input type="number" id="stakeMultiplier" class="input" value="2.0000" step="0.0001" min="1.0102" max="9900" readonly />
                                    <div class="after-icon"></div>
                                </div>
                            </div>

                            <div class="form-group" style="margin-bottom: 16px;">
                                <label class="control-label">Roll Over</label>
                                <div class="input-group">
                                    <input type="number" id="stakeRollOver" class="input" value="50.00" step="0.01" min="0.01" max="98.99" />
                                    <button class="roll-toggle-btn" id="stakeRollToggle" title="Switch Roll Over/Under">
                                        <i class="fas fa-exchange-alt"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="form-group" style="margin-bottom: 24px;">
                                <label class="control-label">Win Chance</label>
                                <div class="input-group">
                                    <input type="number" id="stakeWinChance" class="input" value="49.50" step="0.01" min="1" max="98" readonly />
                                    <div class="after-icon">%</div>
                                </div>
                            </div>

                            <button class="place-bet-button" id="stakePlayButton">
                                <i class="fas fa-play"></i>
                                Bet
                            </button>

                            <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid #105EB4;">
                                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 12px; color: #888; margin-bottom: 8px;">
                                    <span>Profit on Win</span>
                                    <span id="stakeProfitDisplay">0.00000000 USDT</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; font-size: 12px; color: #888;">
                                    <span>Payout</span>
                                    <span id="stakePayoutDisplay">0.00000000 USDT</span>
                                </div>
                            </div>
                        </div>

                        <!-- Right Panel: Dice Visualization -->
                        <div class="dice-visualization">
                            <div class="dice-range-slider">
                                <div class="range-track">
                                    <div class="range-fill-under" id="rangeFillUnder" style="width: 50%;"></div>
                                    <div class="range-fill-over" id="rangeFillOver" style="width: 50%;"></div>
                                </div>
                                <input type="range" class="dice-slider-input" id="stakeSlider" min="1" max="99" value="50" step="0.01">
                            </div>

                            <div class="range-labels">
                                <span style="color: #ef4444;">0.00</span>
                                <span style="color: #1FFF20;">100.00</span>
                            </div>

                            <div class="win-chance-display">
                                <div class="win-chance-value" id="stakeWinChanceDisplay">49.50%</div>
                                <div class="win-chance-label">WIN CHANCE</div>
                            </div>

                            <!-- Live Result Display -->
                            <div id="liveResultDisplay" style="text-align: center; margin-top: 20px; display: none;">
                                <div style="font-size: 48px; font-weight: 700; margin-bottom: 8px;" id="liveResultNumber">--</div>
                                <div style="font-size: 14px; color: #888;" id="liveResultOutcome">--</div>
                            </div>
                        </div>
                    </div>

                    <!-- Game History -->
                    <div style="margin-top: 24px;">
                        <h4 style="color: #1FFF20; margin-bottom: 12px; font-size: 14px;">Recent Results</h4>
                        <div id="stakeGameHistory" style="display: flex; flex-wrap: wrap; gap: 8px; max-height: 120px; overflow-y: auto;">
                            <!-- Game history bubbles will be added here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content">
                <!-- Auto Betting Content (placeholder) -->
                <div class="auto-betting-placeholder">
                    <p>Auto betting coming soon...</p>
                </div>
            </div>
            
            <div class="tab-content">
                <!-- Advanced AI Predictions & Oracle System -->
                <div class="advanced-ai-system">
                    
                    <!-- AI Predictions Panel -->
                    <div class="ai-predictions-section">
                        <h4 style="color: #1FFF20; margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-brain"></i>
                            AI Oracle Predictions
                        </h4>
                        
                        <div class="predictions-grid">
                            <div class="prediction-card">
                                <div class="prediction-header">Next Result Prediction</div>
                                <div class="prediction-main-value" id="aiNextPrediction">--</div>
                                <div class="prediction-confidence">
                                    <span>Confidence: </span>
                                    <span id="aiPredictionConfidence" class="confidence-percent">--</span>
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" id="aiConfidenceBar" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="prediction-card">
                                <div class="prediction-header">Win Probability</div>
                                <div class="prediction-main-value" id="aiWinProbability">--</div>
                                <div class="prediction-sub-text">
                                    Loss Probability: <span id="aiLossProbability">--</span>
                                </div>
                            </div>
                            
                            <div class="prediction-card">
                                <div class="prediction-header">Trend Analysis</div>
                                <div class="prediction-main-value" id="aiTrendDirection">Neutral</div>
                                <div class="prediction-sub-text">
                                    Strength: <span id="aiTrendStrength">--</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Betting Recommendations -->
                        <div class="betting-recommendations">
                            <h5 style="color: #00ffff; margin-bottom: 12px;">
                                <i class="fas fa-chart-line"></i>
                                Betting Recommendations
                            </h5>
                            
                            <div class="recommendation-grid">
                                <div class="recommendation-item">
                                    <label>Recommended Action:</label>
                                    <span id="aiRecommendedAction" class="recommendation-value">Hold</span>
                                </div>
                                
                                <div class="recommendation-item">
                                    <label>Suggested Bet Amount:</label>
                                    <span id="aiSuggestedAmount" class="recommendation-value">0.00000000</span>
                                </div>
                                
                                <div class="recommendation-item">
                                    <label>Risk Level:</label>
                                    <span id="aiRiskLevel" class="recommendation-value risk-medium">Medium</span>
                                </div>
                                
                                <div class="recommendation-item">
                                    <label>Expected Return:</label>
                                    <span id="aiExpectedReturn" class="recommendation-value">+0.00%</span>
                                </div>
                            </div>
                            
                            <div class="recommendation-actions">
                                <button id="applyRecommendations" class="btn btn-primary">
                                    <i class="fas fa-magic"></i> Apply AI Recommendations
                                </button>
                                <button id="refreshPredictions" class="btn btn-secondary">
                                    <i class="fas fa-sync"></i> Refresh Predictions
                                </button>
                            </div>
                        </div>
                        
                        <!-- Pattern Analysis -->
                        <div class="pattern-analysis">
                            <h5 style="color: #ff9500; margin-bottom: 12px;">
                                <i class="fas fa-search"></i>
                                Pattern Analysis
                            </h5>
                            
                            <div class="analysis-grid">
                                <div class="analysis-item">
                                    <label>Detected Patterns:</label>
                                    <span id="detectedPatterns" class="analysis-value">None</span>
                                </div>
                                
                                <div class="analysis-item">
                                    <label>Sequence Strength:</label>
                                    <span id="sequenceStrength" class="analysis-value">--</span>
                                </div>
                                
                                <div class="analysis-item">
                                    <label>Bias Detection:</label>
                                    <span id="biasDetection" class="analysis-value">Neutral</span>
                                </div>
                                
                                <div class="analysis-item">
                                    <label>Entropy Score:</label>
                                    <span id="entropyScore" class="analysis-value">--</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Live Analysis Status -->
                        <div class="analysis-status">
                            <div class="status-indicator">
                                <span class="status-dot" id="analysisStatusDot"></span>
                                <span id="analysisStatusText">Analyzing...</span>
                            </div>
                            <div class="last-update">
                                Last Update: <span id="lastAnalysisUpdate">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">Balance</div>
                    <div class="stat-icon" style="background: rgba(16, 185, 129, 0.15); color: #10b981;">
                        <i class="fas fa-wallet"></i>
                    </div>
                </div>
                <div class="stat-value" id="balance">$1,000.00</div>
                <div class="stat-change" id="balanceChange">Demo funds</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">Total Bets</div>
                    <div class="stat-icon" style="background: rgba(59, 130, 246, 0.15); color: #3b82f6;">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                </div>
                <div class="stat-value" id="totalBets">0</div>
                <div class="stat-change" id="betsChange">No bets placed</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">Win Rate</div>
                    <div class="stat-icon" style="background: rgba(168, 85, 247, 0.15); color: #a855f7;">
                        <i class="fas fa-target"></i>
                    </div>
                </div>
                <div class="stat-value" id="winRate">0%</div>
                <div class="stat-change" id="winRateChange">0/0 wins</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">Status</div>
                    <div class="stat-icon" style="background: rgba(75, 85, 99, 0.15); color: #6b7280;">
                        <i class="fas fa-signal"></i>
                    </div>
                </div>
                <div class="stat-value">
                    <span class="status-indicator status-offline" id="connectionStatus"></span>
                    <span id="connectionText" style="font-size: 16px;">Offline</span>
                </div>
                <div class="stat-change" id="connectionUptime">Disconnected</div>
            </div>
        </div>

        <!-- Auto Oracle Control Panel -->
        <div class="control-panel">
            <div class="control-title">
                <i class="fas fa-brain"></i>
                AI Oracle Auto System
            </div>
            
            <!-- Mode Toggle -->
            <div class="mode-toggle-section">
                <label class="toggle-switch">
                    <input type="checkbox" id="demoModeToggle" checked>
                    <span class="toggle-slider">
                        <span class="toggle-label demo">DEMO</span>
                        <span class="toggle-label real">REAL</span>
                    </span>
                </label>
                <div class="mode-status" id="modeStatus">
                    <i class="fas fa-shield-alt"></i>
                    <span>Demo Mode Active - Safe Testing</span>
                </div>
            </div>

            <!-- Auto Oracle Stats -->
            <div class="oracle-stats-grid">
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-eye"></i></div>
                    <div class="stat-content">
                        <div class="stat-label">Demo Rolls Analyzed</div>
                        <div class="stat-value" id="demoRollsCount">0 / 100</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-key"></i></div>
                    <div class="stat-content">
                        <div class="stat-label">Server Seed Hash</div>
                        <div class="stat-value" id="serverSeedDisplay">Detecting...</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-random"></i></div>
                    <div class="stat-content">
                        <div class="stat-label">Pattern Confidence</div>
                        <div class="stat-value" id="patternConfidence">0%</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
                    <div class="stat-content">
                        <div class="stat-label">Bias Detected</div>
                        <div class="stat-value" id="biasIndicator">Analyzing...</div>
                    </div>
                </div>
            </div>

            <!-- Control Buttons -->
            <div class="oracle-controls">
                <button class="btn btn-oracle" id="startDemoAnalysis">
                    <i class="fas fa-search"></i>
                    Start Demo Analysis (100 Rolls)
                </button>
                
                <button class="btn btn-success" id="startAutoOracle" style="display: none;">
                    <i class="fas fa-robot"></i>
                    Activate Auto Oracle
                </button>
                
                <button class="btn btn-danger" id="stopAutoOracle" style="display: none;">
                    <i class="fas fa-stop"></i>
                    Stop Auto Oracle
                </button>
                
                <button class="btn btn-advanced" id="openAdvancedGUI">
                    <i class="fas fa-cogs"></i>
                    Advanced Oracle GUI
                </button>
            </div>

            <!-- Demo Analysis Progress -->
            <div class="demo-progress" id="demoProgress" style="display: none;">
                <div class="progress-header">
                    <span>Analyzing Demo Patterns...</span>
                    <span id="progressText">0/100</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="analysis-details" id="analysisDetails">
                    <div class="detail-item">
                        <span>HMAC Patterns:</span>
                        <span id="hmacPatterns">Scanning...</span>
                    </div>
                    <div class="detail-item">
                        <span>Seed Analysis:</span>
                        <span id="seedAnalysis">Processing...</span>
                    </div>
                    <div class="detail-item">
                        <span>Bias Direction:</span>
                        <span id="biasDirection">Calculating...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-section">
            <div class="chart-container">
                <div class="chart-title">Profit/Loss Trend</div>
                <canvas id="profitChart" style="height: 280px;"></canvas>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Result Distribution</div>
                <canvas id="resultsChart" style="height: 280px;"></canvas>
            </div>
        </div>

        <!-- Activity Logs -->
        <div class="logs-panel">
            <div class="control-title" style="margin-bottom: 16px;">Activity Log</div>
            <div id="activityLog">
                <div class="log-entry">
                    <span class="log-time">[00:00:00]</span>
                    <span class="log-message">Dashboard initialized in demo mode</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification" class="notification"></div>

    <script>
        // Global variables
        let socket;
        let isConnected = false;
        let isDemoMode = true;
        let autoBettingActive = false;
        let autoBettingInterval;
        let stats = {
            balance: 1000.00,
            totalBets: 0,
            wins: 0,
            losses: 0,
            profit: 0,
            startTime: Date.now()
        };
        let chartData = {
            profit: [0],
            results: [],
            times: ['Start']
        };

        // Initialize charts
        let profitChart, resultsChart;

        // DOM elements
        const modeToggle = document.getElementById('modeToggle');
        const demoLabel = document.getElementById('demoLabel');
        const realLabel = document.getElementById('realLabel');
        const connectBtn = document.getElementById('connectBtn');
        const singleBetBtn = document.getElementById('singleBetBtn');
        const startAutoBetBtn = document.getElementById('startAutoBetBtn');
        const stopAutoBetBtn = document.getElementById('stopAutoBetBtn');

        // Initialize socket connection
        function initializeSocket() {
            socket = io();
            
            socket.on('connect', function() {
                console.log('Connected to server');
                updateConnectionStatus(true);
                logActivity('Connected to Supreme AI server');
                showNotification('Connected to Make AI Dashboard', 'success');
                
                // Request initial data
                requestLiveUpdate();
                requestAIInsights();
            });
            
            socket.on('disconnect', function() {
                console.log('Disconnected from server');
                updateConnectionStatus(false);
                logActivity('Disconnected from server');
                showNotification('Disconnected from server', 'error');
            });
            
            socket.on('bet_result', function(data) {
                handleBetResult(data);
            });

            socket.on('dice_bet_result', function(data) {
                handleDiceBetResult(data);
            });
            
            socket.on('prediction_update', function(data) {
                updatePredictions(data);
            });
            
            socket.on('api_status', function(data) {
                updateApiStatus(data);
            });

            socket.on('balance_update', function(data) {
                updateBalanceFromServer(data);
            });

            socket.on('dashboard_update', function(data) {
                updateDashboardFromServer(data);
            });

            socket.on('live_update', function(data) {
                updateLiveStats(data);
            });

            socket.on('ai_insights_updated', function(data) {
                updateAIInsights(data);
            });

            socket.on('new_decision', function(data) {
                displayNewDecision(data);
            });

            socket.on('bet_executed', function(data) {
                displayBetExecution(data);
            });

            socket.on('market_update', function(data) {
                updateMarketConditions(data);
            });

            socket.on('performance_update', function(data) {
                updatePerformanceMetrics(data);
            });

            socket.on('settings_updated', function(data) {
                handleSettingsUpdate(data);
            });

            socket.on('mode_switched', function(data) {
                handleModeSwitch(data);
            });

            socket.on('error', function(data) {
                console.error('Server error:', data);
                showNotification(`Server error: ${data.message}`, 'error');
            });
        }

        // Mode toggle functionality
        modeToggle.addEventListener('click', function() {
            isDemoMode = !isDemoMode;
            modeToggle.classList.toggle('real-money');
            
            // Notify server about mode change
            if (socket && socket.connected) {
                socket.emit('update_settings', { demo_mode: isDemoMode });
            }
            
            if (isDemoMode) {
                demoLabel.classList.add('active');
                demoLabel.classList.remove('real');
                realLabel.classList.remove('active', 'real');
                stats.balance = 1000.00;
                currencyBalances.usdt = 1000.00004897;
                document.getElementById('balanceChange').textContent = 'Demo funds';
                logActivity('Switched to Demo Mode');
                showNotification('Demo Mode: Virtual $1,000 balance', 'success');
                
                // Disconnect from Stake API if connected
                if (socket && socket.connected) {
                    socket.emit('disconnect_stake_api');
                }
            } else {
                demoLabel.classList.remove('active');
                realLabel.classList.add('active', 'real');
                document.getElementById('balanceChange').textContent = 'Real money - Be careful!';
                logActivity('Switched to Real Money Mode - USE CAUTION!');
                showNotification(' REAL MONEY MODE - Trade carefully!', 'warning');
                
                // Show additional warning for real money
                setTimeout(() => {
                    if (confirm(' WARNING: You are entering REAL MONEY mode!\n\nThis will use your actual Stake.com funds. Only proceed if you:\n Have a funded Stake account\n Understand the risks involved\n Can afford to lose the money you bet\n\nDo you want to continue?')) {
                        logActivity('Real money mode confirmed by user');
                        // Try to connect to real Stake API
                        if (socket && socket.connected) {
                            socket.emit('connect_stake_api', { demo_mode: false });
                        }
                    } else {
                        // User cancelled, revert to demo mode
                        isDemoMode = true;
                        modeToggle.checked = false;
                        modeToggle.classList.remove('real-money');
                        demoLabel.classList.add('active');
                        realLabel.classList.remove('active', 'real');
                        document.getElementById('balanceChange').textContent = 'Demo funds';
                        showNotification('Reverted to Demo Mode', 'info');
                        logActivity('Real money mode cancelled, reverted to demo');
                    }
                });
            }
            
            updateDisplay();
            updateCurrencyDisplay();
        });

        // Connect button functionality
        connectBtn.addEventListener('click', function() {
            if (!isConnected) {
                // Start the AI system
                fetch('/api/start', { method: 'POST' })
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'started') {
                            logActivity('Supreme AI System Started');
                            showNotification('AI System Activated!', 'success');
                            connectBtn.innerHTML = '<i class="fas fa-stop"></i> Stop AI';
                            connectBtn.className = 'btn btn-danger';
                            isConnected = true;
                            
                            // Connect to Stake API based on current mode
                            if (socket && socket.connected) {
                                socket.emit('connect_stake_api', { demo_mode: isDemoMode });
                            }
                            
                            // Start requesting AI insights
                            startAIInsightTimer();
                        } else {
                            showNotification('Failed to start AI system', 'error');
                        }
                    })
                    .catch(error => {
                        logActivity('Failed to start AI system: ' + error.message);
                        showNotification('Connection failed', 'error');
                    });
                    
                connectBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Starting';
                connectBtn.disabled = true;
            } else {
                // Stop the AI system
                fetch('/api/stop', { method: 'POST' })
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'stopped') {
                            logActivity('Supreme AI System Stopped');
                            showNotification('AI System Deactivated', 'info');
                            connectBtn.innerHTML = '<i class="fas fa-link"></i> Start AI';
                            connectBtn.className = 'btn btn-secondary';
                            isConnected = false;
                            
                            // Disconnect from Stake API
                            if (socket && socket.connected) {
                                socket.emit('disconnect_stake_api');
                            }
                            
                            // Stop AI insight timer
                            stopAIInsightTimer();
                        }
                    })
                    .catch(error => {
                        showNotification('Failed to stop AI system', 'error');
                    });
                    
                connectBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Stopping';
                connectBtn.disabled = true;
                setTimeout(() => {
                    connectBtn.disabled = false;
                }, 2000);
            }
        });

        // AI Insight Timer
        let aiInsightTimer = null;
        
        function startAIInsightTimer() {
            // Request AI insights every 30 seconds
            aiInsightTimer = setInterval(() => {
                if (socket && socket.connected) {
                    requestAIInsights();
                }
            }, 30000);
            
            // Get initial insights
            setTimeout(() => {
                requestAIInsights();
            }, 2000);
        }
        
        function stopAIInsightTimer() {
            if (aiInsightTimer) {
                clearInterval(aiInsightTimer);
                aiInsightTimer = null;
            }
        }

        // Betting functionality
        singleBetBtn.addEventListener('click', function() {
            placeSingleBet();
        });

        startAutoBetBtn.addEventListener('click', function() {
            startAutoBetting();
        });

        stopAutoBetBtn.addEventListener('click', function() {
            stopAutoBetting();
        });

        function placeSingleBet() {
            const betAmount = parseFloat(document.getElementById('betAmount').value);
            const targetNumber = parseFloat(document.getElementById('targetNumber').value);
            const condition = document.getElementById('betCondition').value;
            
            if (betAmount <= 0 || betAmount > stats.balance) {
                showNotification('Invalid bet amount or insufficient funds', 'error');
                return;
            }
            
            if (targetNumber <= 0 || targetNumber >= 100) {
                showNotification('Target must be between 0.01 and 99.99', 'error');
                return;
            }
            
            const betData = {
                amount: betAmount,
                target: targetNumber,
                condition: condition,
                demo_mode: isDemoMode
            };
            
            socket.emit('place_bet', betData);
            logActivity(`Placing ${isDemoMode ? 'demo' : 'REAL'} bet: $${betAmount} ${condition} ${targetNumber}`);
            singleBetBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Betting';
            singleBetBtn.disabled = true;
            
            setTimeout(() => {
                singleBetBtn.innerHTML = '<i class="fas fa-dice"></i> Place Bet';
                singleBetBtn.disabled = false;
            }, 2000);
        }

        function startAutoBetting() {
            if (autoBettingActive) return;
            
            const interval = parseInt(document.getElementById('betInterval').value) * 1000;
            if (interval < 2000 || interval > 60000) {
                showNotification('Interval must be between 2-60 seconds', 'error');
                return;
            }
            
            autoBettingActive = true;
            startAutoBetBtn.style.display = 'none';
            stopAutoBetBtn.style.display = 'inline-flex';
            
            autoBettingInterval = setInterval(() => {
                if (stats.balance <= 0) {
                    stopAutoBetting();
                    showNotification('Auto betting stopped: Insufficient funds', 'error');
                    return;
                }
                placeSingleBet();
            }, interval);
            
            logActivity(`Auto betting started (${interval/1000}s interval)`);
            showNotification(`Auto betting started (${interval/1000}s interval)`, 'success');
        }

        function stopAutoBetting() {
            if (!autoBettingActive) return;
            
            autoBettingActive = false;
            startAutoBetBtn.style.display = 'inline-flex';
            stopAutoBetBtn.style.display = 'none';
            
            if (autoBettingInterval) {
                clearInterval(autoBettingInterval);
            }
            
            logActivity('Auto betting stopped');
            showNotification('Auto betting stopped', 'info');
        }

        function handleBetResult(data) {
            stats.totalBets++;
            
            const profitLoss = data.won ? (data.payout - data.amount) : -data.amount;
            stats.balance += profitLoss;
            stats.profit += profitLoss;
            
            if (data.won) {
                stats.wins++;
            } else {
                stats.losses++;
            }
            
            // Update chart data
            chartData.results.push(data.result);
            chartData.profit.push(stats.profit);
            chartData.times.push(new Date().toLocaleTimeString());
            
            // Limit data points to last 50
            if (chartData.results.length > 50) {
                chartData.results.shift();
                chartData.profit.shift();
                chartData.times.shift();
            }
            
            updateDisplay();
            updateCharts();
            
            const resultText = data.won ? 'WON' : 'LOST';
            const resultClass = data.won ? 'success' : 'error';
            const profitText = data.won ? `+$${(data.payout - data.amount).toFixed(2)}` : `-$${data.amount.toFixed(2)}`;
            
            logActivity(`${resultText}: Result ${data.result} | ${profitText} | Balance: $${stats.balance.toFixed(2)}`);
            showNotification(`${resultText}: ${profitText}`, resultClass);
        }

        function updateConnectionStatus(connected) {
            const statusIndicator = document.getElementById('connectionStatus');
            const connectionText = document.getElementById('connectionText');
            
            if (connected) {
                statusIndicator.className = 'status-indicator status-online';
                connectionText.textContent = 'Connected';
                document.getElementById('connectionUptime').textContent = 'Server online';
            } else {
                statusIndicator.className = 'status-indicator status-offline';
                connectionText.textContent = 'Offline';
                document.getElementById('connectionUptime').textContent = 'Disconnected';
            }
        }

        function updateApiStatus(data) {
            isConnected = data.connected;
            const connectBtn = document.getElementById('connectBtn');
            
            if (data.connected) {
                connectBtn.innerHTML = '<i class="fas fa-unlink"></i> Disconnect';
                connectBtn.className = 'btn btn-danger';
                connectBtn.disabled = false;
                logActivity('Connected to Stake API successfully');
                showNotification('Connected to Stake API', 'success');
            } else {
                connectBtn.innerHTML = '<i class="fas fa-link"></i> Connect';
                connectBtn.className = 'btn btn-secondary';
                connectBtn.disabled = false;
                logActivity('Disconnected from Stake API');
                showNotification('Disconnected from Stake API', 'error');
            }
        }

        function updateDisplay() {
            document.getElementById('balance').textContent = `$${stats.balance.toFixed(2)}`;
            document.getElementById('totalBets').textContent = stats.totalBets;
            
            const winRate = stats.totalBets > 0 ? ((stats.wins / stats.totalBets) * 100).toFixed(1) : 0;
            document.getElementById('winRate').textContent = `${winRate}%`;
            document.getElementById('winRateChange').textContent = `${stats.wins}/${stats.totalBets} wins`;
            
            if (stats.totalBets > 0) {
                const profitChange = stats.profit >= 0 ? '+' : '';
                document.getElementById('betsChange').textContent = `${profitChange}$${stats.profit.toFixed(2)} P/L`;
                document.getElementById('betsChange').className = `stat-change ${stats.profit >= 0 ? 'positive' : 'negative'}`;
            }
        }

        function updatePredictions(data) {
            document.getElementById('nextPrediction').textContent = data.prediction || '--';
            document.getElementById('predictionConfidence').style.width = `${data.confidence || 0}%`;
            document.getElementById('trendDirection').textContent = data.trend || 'Neutral';
            document.getElementById('recommendedBet').textContent = data.recommendation || 'Hold';
            document.getElementById('riskLevel').textContent = data.risk || 'Medium';
        }

        // New handler functions for enhanced connectivity
        function requestLiveUpdate() {
            if (socket && socket.connected) {
                socket.emit('request_live_update');
            }
        }

        function requestAIInsights() {
            if (socket && socket.connected) {
                socket.emit('get_ai_insights');
            }
        }

        function handleDiceBetResult(data) {
            console.log('Dice bet result received:', data);
            
            if (data.error) {
                showNotification(`Bet Error: ${data.error}`, 'error');
                return;
            }

            // Update dice result display
            const diceResult = document.getElementById('diceResult');
            const diceContainer = document.querySelector('.dice-container');
            
            if (diceResult && diceContainer) {
                diceResult.textContent = data.result.toFixed(2);
                diceResult.className = `dice-result ${data.won ? 'win' : 'loss'}`;
                diceContainer.classList.remove('is-hidden');
            }

            // Update balance
            if (data.balance !== undefined) {
                currencyBalances[data.currency] = data.balance;
                updateCurrencyDisplay();
            }

            // Update stats
            stats.totalBets++;
            if (data.won) {
                stats.wins++;
                stats.profit += data.profit;
                logActivity(`WIN: ${data.result} | +${data.profit.toFixed(8)} ${data.currency.toUpperCase()}`);
                showNotification(`Won ${data.profit.toFixed(8)} ${data.currency.toUpperCase()}!`, 'success');
            } else {
                stats.losses++;
                stats.profit += data.profit; // data.profit will be negative
                logActivity(`LOSS: ${data.result} | ${data.profit.toFixed(8)} ${data.currency.toUpperCase()}`);
                showNotification(`Lost ${Math.abs(data.profit).toFixed(8)} ${data.currency.toUpperCase()}`, 'error');
            }

            updateDisplay();
            updateCharts();
        }

        function updateBalanceFromServer(data) {
            if (data.balance !== undefined) {
                if (isDemoMode) {
                    stats.balance = data.balance;
                    currencyBalances.usdt = data.balance;
                } else {
                    // Real money mode - update appropriate currency
                    currencyBalances[currentCurrency] = data.balance;
                    stats.balance = data.balance;
                }
                updateDisplay();
                updateCurrencyDisplay();
            }
        }

        function updateDashboardFromServer(data) {
            if (data.live_stats) {
                Object.assign(stats, data.live_stats);
                updateDisplay();
            }
            
            if (data.system_status) {
                dashboard_state = Object.assign(dashboard_state || {}, data.system_status);
                updateSystemStatus(data.system_status);
            }
        }

        function updateLiveStats(data) {
            if (data.live_stats) {
                Object.assign(stats, data.live_stats);
                updateDisplay();
            }
            
            if (data.recent_decisions && data.recent_decisions.length > 0) {
                data.recent_decisions.forEach(decision => {
                    displayAIDecision(decision);
                });
            }
        }

        function updateAIInsights(data) {
            if (data.insights) {
                const insights = data.insights;
                
                // Update AI predictions panel
                if (insights.next_prediction) {
                    document.getElementById('nextPrediction').textContent = insights.next_prediction;
                }
                
                if (insights.confidence !== undefined) {
                    document.getElementById('predictionConfidence').style.width = `${insights.confidence}%`;
                }
                
                if (insights.trend_direction) {
                    document.getElementById('trendDirection').textContent = insights.trend_direction;
                }
                
                if (insights.recommendation) {
                    document.getElementById('recommendedBet').textContent = insights.recommendation;
                }
                
                if (insights.risk_level) {
                    document.getElementById('riskLevel').textContent = insights.risk_level;
                }
                
                logActivity(`AI Update: ${insights.recommendation || 'No action'} (${insights.confidence || 0}% confidence)`);
            }
        }

        function displayNewDecision(data) {
            if (data.decision) {
                const decision = data.decision;
                logActivity(`AI Decision: ${decision.should_bet ? 'BET' : 'HOLD'} - ${decision.strategy_used} (${decision.confidence}% confidence)`);
                
                // Update predictions based on decision
                document.getElementById('nextPrediction').textContent = decision.should_bet ? `${decision.side.toUpperCase()} ${decision.target_roll}` : 'Hold';
                document.getElementById('predictionConfidence').style.width = `${decision.confidence || 0}%`;
                document.getElementById('recommendedBet').textContent = decision.should_bet ? `Bet ${decision.bet_amount}` : 'Hold';
            }
        }

        function displayBetExecution(data) {
            if (data.result && data.decision) {
                const result = data.result;
                const decision = data.decision;
                
                logActivity(`Bet Executed: ${decision.bet_amount} ${decision.side} ${decision.target_roll} - Result: ${result.bet_result?.roll || 'Unknown'}`);
                
                if (result.bet_result?.won) {
                    showNotification(`Auto Bet Won! +${result.bet_result.profit}`, 'success');
                } else {
                    showNotification(`Auto Bet Lost: -${decision.bet_amount}`, 'error');
                }
            }
        }

        function updateMarketConditions(data) {
            // Update market condition indicators if you have them in your UI
            console.log('Market conditions updated:', data);
        }

        function updatePerformanceMetrics(data) {
            if (data.live_stats) {
                Object.assign(stats, data.live_stats);
                updateDisplay();
            }
        }

        function handleSettingsUpdate(data) {
            if (data.bet_interval) {
                document.getElementById('betInterval').value = data.bet_interval;
                logActivity(`Bet interval updated to ${data.bet_interval}s`);
            }
            
            if (data.error) {
                showNotification(`Settings Error: ${data.error}`, 'error');
            } else if (data.status === 'success') {
                showNotification('Settings updated successfully', 'success');
            }
        }

        function handleModeSwitch(data) {
            if (data.demo_mode !== undefined) {
                isDemoMode = data.demo_mode;
                updateModeDisplay();
                logActivity(`Switched to ${isDemoMode ? 'Demo' : 'Real Money'} mode`);
                showNotification(`${isDemoMode ? 'Demo' : ' REAL MONEY'} mode activated`, isDemoMode ? 'success' : 'warning');
            }
        }

        function updateSystemStatus(status) {
            // Update system status indicators
            if (status.is_running !== undefined) {
                // Update running status indicator
                console.log('System running:', status.is_running);
            }
            
            if (status.auto_betting !== undefined) {
                autoBettingActive = status.auto_betting;
                // Update auto betting UI
                if (autoBettingActive) {
                    startAutoBetBtn.style.display = 'none';
                    stopAutoBetBtn.style.display = 'inline-flex';
                } else {
                    startAutoBetBtn.style.display = 'inline-flex';
                    stopAutoBetBtn.style.display = 'none';
                }
            }
        }

        function updateModeDisplay() {
            const modeToggle = document.getElementById('modeToggle');
            if (modeToggle) {
                modeToggle.checked = !isDemoMode;
                modeToggle.parentElement.classList.toggle('real-money', !isDemoMode);
                
                // Update balance display
                if (isDemoMode) {
                    document.getElementById('balanceChange').textContent = 'Demo funds';
                    stats.balance = 1000.00;
                } else {
                    document.getElementById('balanceChange').textContent = 'Real money - Be careful!';
                }
                
                updateDisplay();
            }
        }

        function displayAIDecision(decision) {
            // Display AI decision in the activity log
            const action = decision.should_bet ? 'RECOMMEND BET' : 'RECOMMEND HOLD';
            const details = decision.should_bet ? 
                `${decision.bet_amount} ${decision.side} ${decision.target_roll} (${decision.strategy_used})` : 
                `${decision.strategy_used}`;
            
            logActivity(`AI ${action}: ${details} - ${decision.confidence}% confidence`);
        }

        function initializeCharts() {
            // Profit Chart
            const profitCtx = document.getElementById('profitChart').getContext('2d');
            profitChart = new Chart(profitCtx, {
                type: 'line',
                data: {
                    labels: chartData.times,
                    datasets: [{
                        label: 'Profit/Loss',
                        data: chartData.profit,
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointRadius: 2,
                        pointHoverRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            display: false
                        },
                        y: {
                            ticks: { 
                                color: '#6b7280',
                                font: { size: 11 }
                            },
                            grid: { 
                                color: 'rgba(75, 85, 99, 0.1)',
                                drawBorder: false
                            }
                        }
                    },
                    elements: {
                        point: {
                            backgroundColor: '#3b82f6'
                        }
                    }
                }
            });

            // Results Chart
            const resultsCtx = document.getElementById('resultsChart').getContext('2d');
            resultsChart = new Chart(resultsCtx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Results',
                        data: chartData.results.map((result, index) => ({ x: index + 1, y: result })),
                        backgroundColor: '#a855f7',
                        borderColor: '#a855f7',
                        pointRadius: 3,
                        pointHoverRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            ticks: { 
                                color: '#6b7280',
                                font: { size: 11 }
                            },
                            grid: { 
                                color: 'rgba(75, 85, 99, 0.1)',
                                drawBorder: false
                            }
                        },
                        y: {
                            min: 0,
                            max: 100,
                            ticks: { 
                                color: '#6b7280',
                                font: { size: 11 }
                            },
                            grid: { 
                                color: 'rgba(75, 85, 99, 0.1)',
                                drawBorder: false
                            }
                        }
                    }
                }
            });
        }

        function updateCharts() {
            if (profitChart) {
                profitChart.data.labels = chartData.times;
                profitChart.data.datasets[0].data = chartData.profit;
                profitChart.update('none');
            }

            if (resultsChart) {
                resultsChart.data.datasets[0].data = chartData.results.map((result, index) => ({ x: index + 1, y: result }));
                resultsChart.update('none');
            }
        }

        function logActivity(message) {
            const logContainer = document.getElementById('activityLog');
            const time = new Date().toLocaleTimeString();
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.innerHTML = `<span class="log-time">[${time}]</span> <span class="log-message">${message}</span>`;
            
            logContainer.appendChild(entry);
            logContainer.scrollTop = logContainer.scrollHeight;
            
            // Limit log entries to last 100
            const entries = logContainer.querySelectorAll('.log-entry');
            if (entries.length > 100) {
                entries[0].remove();
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeSocket();
            initializeCharts();
            initializeDiceGame();
            initializeCurrencyDropdown();
            updateDisplay();
            
            logActivity('Professional dashboard initialized');
            showNotification('Welcome to the Supreme AI Dashboard', 'success');
        });

        // Dice Game Functionality
        let currentCurrency = 'usdt';
        let currencyBalances = {
            usdt: 1000.00004897,
            btc: 0.00000000,
            eth: 0.00000000,
            doge: 0.00000000
        };

        // Load balances from server on startup
        function loadBalancesFromServer() {
            if (socket && socket.connected) {
                // Request current balances from server
                fetch('/api/dashboard_data')
                    .then(response => response.json())
                    .then(data => {
                        if (data.live_stats && data.live_stats.current_bankroll !== undefined) {
                            if (isDemoMode) {
                                currencyBalances.usdt = data.live_stats.current_bankroll;
                                stats.balance = data.live_stats.current_bankroll;
                            }
                            
                            // Update stats from server
                            Object.assign(stats, data.live_stats);
                            updateDisplay();
                            updateCurrencyDisplay();
                        }
                    })
                    .catch(error => {
                        console.log('Could not load server balances, using defaults:', error);
                    });
            }
        }

        function initializeDiceGame() {
            const diceSlider = document.getElementById('diceSlider');
            const multiplierInput = document.getElementById('multiplierInput');
            const rollOverInput = document.getElementById('rollOverInput');
            const winChanceInput = document.getElementById('winChanceInput');
            const betAmountInput = document.getElementById('betAmount');
            const profitAmount = document.getElementById('profitAmount');

            // Initialize tab functionality
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach((button, index) => {
                button.addEventListener('click', function() {
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    button.classList.add('active');
                    tabContents[index].classList.add('active');
                });
            });

            // Amount modification buttons
            document.getElementById('halveButton').addEventListener('click', function() {
                const current = parseFloat(betAmountInput.value) || 0;
                betAmountInput.value = (current / 2).toFixed(8);
                updateProfitCalculation();
            });

            document.getElementById('doubleButton').addEventListener('click', function() {
                const current = parseFloat(betAmountInput.value) || 0;
                betAmountInput.value = (current * 2).toFixed(8);
                updateProfitCalculation();
            });

            // Dice slider logic
            diceSlider.addEventListener('input', function() {
                const value = parseInt(this.value);
                updateDiceCalculations(value);
                updateRangeVisualization(value);
            });

            // Input field synchronization
            multiplierInput.addEventListener('input', function() {
                const multiplier = parseFloat(this.value);
                if (multiplier >= 1.0102 && multiplier <= 9900) {
                    const winChance = (99 / multiplier).toFixed(4);
                    const rollOver = (100 - parseFloat(winChance)).toFixed(2);
                    
                    winChanceInput.value = winChance;
                    rollOverInput.value = rollOver;
                    diceSlider.value = Math.round(parseFloat(rollOver));
                    
                    updateRangeVisualization(Math.round(parseFloat(rollOver)));
                    updateProfitCalculation();
                }
            });

            winChanceInput.addEventListener('input', function() {
                const winChance = parseFloat(this.value);
                if (winChance >= 0.01 && winChance <= 98) {
                    const multiplier = (99 / winChance).toFixed(4);
                    const rollOver = (100 - winChance).toFixed(2);
                    
                    multiplierInput.value = multiplier;
                    rollOverInput.value = rollOver;
                    diceSlider.value = Math.round(parseFloat(rollOver));
                    
                    updateRangeVisualization(Math.round(parseFloat(rollOver)));
                    updateProfitCalculation();
                }
            });

            // Bet amount changes
            betAmountInput.addEventListener('input', function() {
                updateProfitCalculation();
            });

            // Place bet button
            document.getElementById('placeBetButton').addEventListener('click', function() {
                placeDiceBet();
            });

            // Initialize with default values
            updateDiceCalculations(50);
            updateProfitCalculation();
        }

        function updateDiceCalculations(rollOver) {
            const winChance = (100 - rollOver).toFixed(4);
            const multiplier = (99 / parseFloat(winChance)).toFixed(4);
            
            document.getElementById('winChanceInput').value = winChance;
            document.getElementById('multiplierInput').value = multiplier;
            document.getElementById('rollOverInput').value = rollOver.toFixed(2);
            
            updateProfitCalculation();
        }

        function updateRangeVisualization(rollOver) {
            const lowerRange = document.getElementById('lowerRange');
            const higherRange = document.getElementById('higherRange');
            
            const winChance = 100 - rollOver;
            lowerRange.style.width = `${rollOver}%`;
            higherRange.style.width = `${winChance}%`;
        }

        function updateProfitCalculation() {
            const betAmount = parseFloat(document.getElementById('betAmount').value) || 0;
            const multiplier = parseFloat(document.getElementById('multiplierInput').value) || 1;
            
            const profit = (betAmount * (multiplier - 1)).toFixed(8);
            document.getElementById('profitAmount').value = profit;
            
            // Update conversion amounts (mock USD conversion)
            const usdRate = currentCurrency === 'usdt' ? 1 : (currentCurrency === 'btc' ? 45000 : 3000);
            document.getElementById('conversionAmount').textContent = `$${(betAmount * usdRate).toFixed(2)}`;
            document.getElementById('profitConversion').textContent = `$${(parseFloat(profit) * usdRate).toFixed(2)}`;
        }

        function placeDiceBet() {
            const betAmount = parseFloat(document.getElementById('betAmount').value) || 0;
            const rollOver = parseFloat(document.getElementById('rollOverInput').value) || 50;
            const winChance = parseFloat(document.getElementById('winChanceInput').value) || 50;
            const multiplier = parseFloat(document.getElementById('multiplierInput').value) || 2;

            // Validate bet
            if (betAmount <= 0) {
                showNotification('Please enter a valid bet amount', 'error');
                return;
            }

            if (betAmount > currencyBalances[currentCurrency]) {
                showNotification('Insufficient balance', 'error');
                return;
            }

            // Disable bet button during processing
            const betButton = document.getElementById('placeBetButton');
            betButton.disabled = true;
            betButton.textContent = 'Rolling...';

            // Show processing state
            showNotification('Placing bet via Stake API...', 'info');
            logActivity(`Placing bet: ${betAmount} ${currentCurrency.toUpperCase()} | Roll Over ${rollOver} | ${winChance}% chance`);

            // Send bet to backend for Stake API processing
            socket.emit('place_dice_bet', {
                amount: betAmount,
                target: rollOver,
                condition: 'over',
                demo_mode: isDemoMode,
                currency: currentCurrency,
                multiplier: multiplier,
                winChance: winChance,
                client_seed: generateClientSeed()
            });
        }

        // Handle dice bet result from Stake API
        socket.on('dice_bet_result', function(data) {
            const betButton = document.getElementById('placeBetButton');
            betButton.disabled = false;
            betButton.textContent = 'Place Bet';

            if (data.error) {
                showNotification(`Bet failed: ${data.error}`, 'error');
                logActivity(` Bet error: ${data.error}`);
                return;
            }

            // Extract result from Stake API response
            const result = data.result.toFixed(2);
            const won = data.won;
            const profit = data.profit || 0;
            const betAmount = data.bet_amount;
            const rollOver = data.target;

            // Update local balances based on API result
            if (won) {
                currencyBalances[currentCurrency] += profit;
                stats.wins++;
            } else {
                currencyBalances[currentCurrency] -= betAmount;
                stats.losses++;
            }
            
            stats.totalBets++;
            updateCurrencyDisplay();
            
            // Show result with Stake API data
            const diceContainer = document.querySelector('.dice-container');
            const diceResult = document.getElementById('diceResult');
            
            diceContainer.classList.remove('is-hidden');
            diceResult.textContent = result;
            diceResult.className = `dice-result ${won ? 'win' : 'loss'}`;
            
            // Display additional Stake API info if available
            const apiInfo = data.server_seed_hash ? ` | Hash: ${data.server_seed_hash.substring(0, 8)}...` : '';
            const nonce = data.nonce ? ` | Nonce: ${data.nonce}` : '';
            
            const resultMessage = won ? 
                ` WIN! ${result} > ${rollOver} | +${profit.toFixed(8)} ${currentCurrency.toUpperCase()}${apiInfo}${nonce}` :
                ` LOSS! ${result}  ${rollOver} | -${betAmount.toFixed(8)} ${currentCurrency.toUpperCase()}${apiInfo}${nonce}`;
            
            logActivity(resultMessage);
            showNotification(resultMessage, won ? 'success' : 'error');

            setTimeout(() => {
                diceContainer.classList.add('is-hidden');
            }, 3000);
        });

        // Generate client seed for provably fair gaming
        function generateClientSeed() {
            return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
        }

        // Generate new seed for provably fair gaming
        function generateNewSeed(type) {
            if (type === 'client') {
                const newSeed = generateRandomString(16);
                document.getElementById('clientSeed').value = newSeed;
                const currentDisplay = document.getElementById('currentClientSeed');
                if (currentDisplay) {
                    currentDisplay.textContent = newSeed;
                }
                
                // Update seed state
                if (typeof currentSeeds !== 'undefined') {
                    currentSeeds.clientSeed = newSeed;
                    updateSeedsDisplay();
                }
                
                // Show visual feedback
                showSeedNotification('New client seed generated!', 'success');
                
                // Notify backend
                if (typeof socket !== 'undefined' && socket && socket.connected) {
                    socket.emit('seed_updated', {
                        type: 'client',
                        seed: newSeed,
                        timestamp: Date.now()
                    });
                }
            }
        }

        function verifyFairness() {
            const clientSeed = document.getElementById('clientSeed').value.trim();
            const serverSeedHash = document.getElementById('serverSeedHash').value.trim();
            const revealedServerSeed = document.getElementById('revealedServerSeed') ? 
                  document.getElementById('revealedServerSeed').value.trim() : '';
            const nonceElement = document.getElementById('nonceValue');
            const nonce = nonceElement ? parseInt(nonceElement.textContent) || 0 : 0;
            
            if (!clientSeed || !serverSeedHash) {
                showVerificationResult('Please enter both client seed and server seed hash', 'error');
                return;
            }
            
            if (revealedServerSeed) {
                // Verify with revealed server seed
                const computedHash = sha256(revealedServerSeed);
                
                if (computedHash.toLowerCase() === serverSeedHash.toLowerCase()) {
                    // Calculate dice result
                    const hmacResult = calculateHMAC(revealedServerSeed, `${clientSeed}:${nonce}`);
                    const diceResult = hmacToDiceResult(hmacResult);
                    
                    showVerificationResult(
                        ` Verification successful!\n` +
                        `Server seed hash matches!\n` +
                        `Calculated result: ${diceResult.toFixed(2)}\n` +
                        `HMAC: ${hmacResult.substring(0, 16)}...`,
                        'success'
                    );
                    
                    const statusElement = document.getElementById('verificationStatus');
                    if (statusElement) {
                        statusElement.textContent = 'Verified ';
                    }
                } else {
                    showVerificationResult(
                        ` Verification failed!\n` +
                        `Server seed hash does not match revealed seed.\n` +
                        `Expected: ${serverSeedHash}\n` +
                        `Got: ${computedHash}`,
                        'error'
                    );
                }
            } else {
                showVerificationResult(
                    ` Partial verification:\n` +
                    `Client seed: ${clientSeed}\n` +
                    `Server hash: ${serverSeedHash.substring(0, 16)}...\n` +
                    `Nonce: ${nonce}\n` +
                    `Need revealed server seed for full verification`,
                    'info'
                );
            }
        }

        function showVerificationResult(message, type) {
            let resultDiv = document.getElementById('verificationResult');
            if (!resultDiv) {
                // Create the result div if it doesn't exist
                resultDiv = document.createElement('div');
                resultDiv.id = 'verificationResult';
                resultDiv.style.cssText = `
                    display: none;
                    padding: 10px;
                    margin-top: 10px;
                    border-radius: 5px;
                    white-space: pre-line;
                    font-family: monospace;
                    font-size: 12px;
                `;
                
                // Try to add it after seed info
                const seedInfo = document.querySelector('.seed-info');
                if (seedInfo && seedInfo.parentNode) {
                    seedInfo.parentNode.appendChild(resultDiv);
                } else {
                    document.body.appendChild(resultDiv);
                }
            }
            
            const colors = {
                success: '#d4edda',
                error: '#f8d7da',
                info: '#d1ecf1'
            };
            
            resultDiv.style.display = 'block';
            resultDiv.style.backgroundColor = colors[type] || colors.info;
            resultDiv.style.color = type === 'error' ? '#721c24' : type === 'success' ? '#155724' : '#0c5460';
            resultDiv.style.border = `1px solid ${type === 'error' ? '#f5c6cb' : type === 'success' ? '#c3e6cb' : '#bee5eb'}`;
            resultDiv.textContent = message;
            
            // Auto-hide after 10 seconds
            setTimeout(() => {
                resultDiv.style.display = 'none';
            }, 10000);
        }

        function showSeedNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 20px;
                background: ${type === 'success' ? '#28a745' : '#dc3545'};
                color: white;
                border-radius: 5px;
                z-index: 10000;
                box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                font-weight: 500;
                animation: slideIn 0.3s ease-out;
            `;
            notification.textContent = message;
            
            // Add slide-in animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-in forwards';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        function generateRandomString(length) {
            const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            for (let i = 0; i < length; i++) {
                result += charset.charAt(Math.floor(Math.random() * charset.length));
            }
            return result;
        }

        function calculateHMAC(key, message) {
            // Simple HMAC-SHA256 implementation
            // In production, use a proper crypto library
            const blockSize = 64;
            const ipad = new Array(blockSize).fill(0x36);
            const opad = new Array(blockSize).fill(0x5c);
            
            if (key.length > blockSize) {
                key = sha256(key);
            }
            
            for (let i = 0; i < key.length; i++) {
                ipad[i] ^= key.charCodeAt(i);
                opad[i] ^= key.charCodeAt(i);
            }
            
            const innerHash = sha256(String.fromCharCode(...ipad) + message);
            return sha256(String.fromCharCode(...opad) + innerHash);
        }

        function hmacToDiceResult(hmac) {
            // Convert first 4 bytes of HMAC to dice result (0-99.99)
            const hex = hmac.substring(0, 8);
            const int = parseInt(hex, 16);
            return (int % 10000) / 100;
        }

        function sha256(str) {
            // Simple SHA-256 implementation for demo
            // In production, use crypto.subtle or a proper library
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // Convert to 32bit integer
            }
            return Math.abs(hash).toString(16).padStart(8, '0').repeat(8).substring(0, 64);
        }

        function initializeCurrencyDropdown() {
            const currencyButton = document.querySelector('.currency-button');
            const currencyDropdown = document.getElementById('currencyDropdown');
            const currencyOptions = document.querySelectorAll('.currency-option');

            if (!currencyButton || !currencyDropdown) {
                console.error('Currency dropdown elements not found');
                return;
            }

            currencyButton.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const isHidden = currencyDropdown.classList.contains('hidden');
                
                // Close all other dropdowns first
                document.querySelectorAll('.currency-dropdown').forEach(dropdown => {
                    dropdown.classList.add('hidden');
                });
                
                if (isHidden) {
                    currencyDropdown.classList.remove('hidden');
                    showToast('Select currency to switch balance', 'info', 2000);
                } else {
                    currencyDropdown.classList.add('hidden');
                }
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!currencyButton.contains(e.target) && !currencyDropdown.contains(e.target)) {
                    currencyDropdown.classList.add('hidden');
                }
            });

            // Handle currency selection
            currencyOptions.forEach(option => {
                option.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const currency = this.dataset.currency;
                    
                    if (currency && currency !== currentCurrency) {
                        switchCurrency(currency);
                        currencyDropdown.classList.add('hidden');
                        
                        // Visual feedback
                        this.style.background = '#1FFF20';
                        this.style.color = '#000';
                        
                        setTimeout(() => {
                            this.style.background = '';
                            this.style.color = '';
                        }, 300);
                    }
                });
                
                // Add hover effects
                option.addEventListener('mouseenter', function() {
                    this.style.background = '#374151';
                });
                
                option.addEventListener('mouseleave', function() {
                    this.style.background = '';
                });
            });

            updateCurrencyDisplay();
            
            // Initialize with default currency
            setTimeout(() => {
                logActivity(`Currency system initialized with ${currentCurrency.toUpperCase()}`);
            }, 100);
        }

        function switchCurrency(currency) {
            if (!currency || currency === currentCurrency) return;
            
            const previousCurrency = currentCurrency;
            currentCurrency = currency;
            
            try {
                // Update current balance display
                const balance = currencyBalances[currency];
                const currentBalanceEl = document.getElementById('currentBalance');
                if (currentBalanceEl) {
                    currentBalanceEl.textContent = balance.toFixed(8);
                    
                    // Animate balance change
                    currentBalanceEl.style.color = '#1FFF20';
                    currentBalanceEl.style.fontWeight = 'bold';
                    setTimeout(() => {
                        currentBalanceEl.style.color = '';
                        currentBalanceEl.style.fontWeight = '';
                    }, 1000);
                }
                
                // Update currency icons throughout interface
                const iconSVG = getCurrencyIcon(currency);
                
                // Update main currency icon
                const currencyIconEl = document.querySelector('.currency-icon svg');
                if (currencyIconEl) {
                    currencyIconEl.outerHTML = iconSVG;
                }
                
                // Update betting interface currency icons
                const betCurrencyIconIds = [
                    'betCurrencyIcon',
                    'profitCurrencyIcon',
                    'stakeBetCurrencyIcon'
                ];
                
                betCurrencyIconIds.forEach(iconId => {
                    const iconEl = document.getElementById(iconId);
                    if (iconEl) {
                        const newIcon = iconSVG.replace('width="20"', `width="20" id="${iconId}"`);
                        iconEl.outerHTML = newIcon;
                    }
                });
                
                // Update button attribute
                const currencyButton = document.querySelector('.currency-button');
                if (currencyButton) {
                    currencyButton.dataset.activeCurrency = currency;
                }
                
                // Update balance in sidebar balances
                const balanceSpan = document.getElementById(`${currency}Balance`);
                if (balanceSpan) {
                    balanceSpan.textContent = balance.toFixed(8);
                    balanceSpan.style.color = '#1FFF20';
                    setTimeout(() => {
                        balanceSpan.style.color = '';
                    }, 1000);
                }
                
                // Reset bet amounts
                const betAmountInputs = [
                    'betAmount',
                    'stakeBetAmount'
                ];
                
                betAmountInputs.forEach(inputId => {
                    const inputEl = document.getElementById(inputId);
                    if (inputEl) {
                        inputEl.value = '';
                        inputEl.placeholder = `0.${'0'.repeat(8)}`;
                    }
                });
                
                // Update stats balance display
                stats.balance = balance;
                updateDisplay();
                updateProfitCalculation();
                updateStakeDiceCalculations();
                
                // Log currency change
                logActivity(`Currency switched: ${previousCurrency.toUpperCase()}  ${currency.toUpperCase()} | Balance: ${balance.toFixed(8)}`);
                showToast(`Currency changed to ${currency.toUpperCase()} | Balance: ${balance.toFixed(8)}`, 'success');
                
                // Notify backend if connected
                if (socket && socket.connected) {
                    socket.emit('currency_changed', {
                        new_currency: currency,
                        previous_currency: previousCurrency,
                        balance: balance
                    });
                }
                
                // Update conversion rates
                updateConversionRates(currency);
                
            } catch (error) {
                console.error('Currency switch error:', error);
                showToast('Failed to switch currency', 'error');
                
                // Revert currency change
                currentCurrency = previousCurrency;
            }
        }

        function updateCurrencyDisplay() {
            const balance = currencyBalances[currentCurrency];
            document.getElementById('currentBalance').textContent = balance.toFixed(8);
            document.getElementById(`${currentCurrency}Balance`).textContent = balance.toFixed(8);
            
            // Update stats balance display
            stats.balance = balance;
            updateDisplay();
        }

        function updateConversionRates(currency) {
            // Mock conversion rates (replace with real API)
            const conversionRates = {
                usdt: 1.00,
                btc: 45000.00,
                eth: 2500.00,
                doge: 0.08
            };
            
            const rate = conversionRates[currency] || 1.00;
            
            // Update all conversion displays
            const conversionElements = [
                'conversionAmount',
                'profitConversion'
            ];
            
            conversionElements.forEach(elementId => {
                const element = document.getElementById(elementId);
                if (element) {
                    const amountString = element.textContent.replace('$', '');
                    const amount = parseFloat(amountString) || 0;
                    // Update with current currency rate
                    element.textContent = `$${(amount).toFixed(2)}`;
                }
            });
        }

        function getCurrencyIcon(currency) {
            const icons = {
                usdt: '<svg data-ds-icon="USDT" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" class="currency-icon-svg"><path fill="#26A17B" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11"></path><path fill="#fff" d="M13.322 12.95c-.076.005-.466.028-1.336.028-.694 0-1.183-.02-1.355-.029v.002c-2.673-.117-4.668-.583-4.668-1.14s1.995-1.021 4.668-1.14v1.817c.175.013.675.042 1.367.042.83 0 1.246-.034 1.324-.041v-1.817c2.667.119 4.657.584 4.657 1.14s-1.99 1.02-4.657 1.139m0-2.467V8.856h3.722v-2.48H6.909v2.48h3.722v1.626c-3.025.139-5.3.738-5.3 1.456s2.275 1.317 5.3 1.456v5.213h2.69v-5.214c3.02-.139 5.29-.738 5.29-1.455s-2.27-1.316-5.29-1.455"></path></svg>',
                btc: '<svg data-ds-icon="BTC" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" class="currency-icon-svg"><path fill="#F7931A" d="M23.638 14.904c-1.602 6.43-8.113 10.34-14.542 8.736C2.67 22.05-1.244 15.525.362 9.105 1.962 2.67 8.475-1.243 14.9.358c6.43 1.605 10.342 8.115 8.738 14.546z"></path><path fill="#FFF" d="M16.103 10.626c.229-1.525-.934-2.345-2.525-2.892l.516-2.068-1.258-.314-.502 2.016c-.33-.083-.67-.16-1.008-.236l.505-2.027-1.259-.314-.515 2.068c-.274-.063-.542-.124-.803-.187v-.007l-1.735-.432-.334 1.343s.934.214.914.227c.51.127.602.465.586.732l-.587 2.357c.035.009.08.022.13.043l-.131-.033-.822 3.297c-.062.155-.22.39-.576.301.013.019-.914-.228-.914-.228l-.624 1.439 1.638.408c.305.077.603.157.896.232l-.52 2.088 1.258.314.515-2.067c.342.093.675.178 1 .256l-.513 2.058 1.259.314.52-2.084c2.14.405 3.75.242 4.426-1.694.545-1.555-.027-2.452-1.151-3.036.819-.189 1.436-.728 1.602-1.844zm-2.87 4.026c-.388 1.56-3.014.716-3.865.505l.689-2.761c.851.212 3.581.631 3.176 2.256zm.387-4.051c-.354 1.421-2.545.699-3.255.522l.625-2.506c.71.177 3.005.507 2.63 1.984z"></path></svg>',
                eth: '<svg data-ds-icon="ETH" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" class="currency-icon-svg"><path fill="#627EEA" d="m11.944 17.97-4.788-7.13 4.788 2.855 4.788-2.855z"></path><path fill="#8A92B2" d="m7.157 10.84 4.787 7.13V1z"></path><path fill="#627EEA" d="M11.944 1v16.97l4.788-7.13z"></path><path fill="#8A92B2" d="M11.944 20.31v2.69L7.157 13.07z"></path><path fill="#627EEA" d="M11.944 23v-2.69L16.73 13.07z"></path></svg>',
                doge: '<svg data-ds-icon="DOGE" width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" class="currency-icon-svg"><path fill="#C2A633" d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12z"></path><path fill="#FFF" d="M10.069 16.74h2.964c3.226 0 5.084-1.707 5.084-4.71 0-3.003-1.858-4.71-5.084-4.71h-2.964v9.42zm1.903-1.692V9.415h.82c1.958 0 3.18.906 3.18 2.817 0 1.91-1.222 2.816-3.18 2.816h-.82z"></path><path fill="#FFF" d="M8.718 7.32H6.815v9.42h1.903V7.32z"></path><path fill="#FFF" d="M14.967 11.73h3.18v1.692h-3.18V11.73z"></path></svg>'
            };
            return icons[currency] || icons.usdt;
        }

        // Betting Interface JavaScript
        function initBettingInterface() {
            // Tab switching
            document.querySelectorAll('.betting-tabs .tab-button').forEach((button, index) => {
                button.addEventListener('click', function() {
                    // Update tab buttons
                    document.querySelectorAll('.betting-tabs .tab-button').forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update tab content
                    document.querySelectorAll('.betting-interface .tab-content').forEach((content, contentIndex) => {
                        if (contentIndex === index) {
                            content.classList.add('active');
                        } else {
                            content.classList.remove('active');
                        }
                    });
                });
            });

            // Roll Over/Under Toggle
            const rollToggleBtn = document.getElementById('rollToggleBtn');
            const rollOverInput = document.getElementById('rollOverInput');
            let rollMode = 'over'; // 'over' or 'under'
            
            rollToggleBtn.addEventListener('click', function() {
                rollMode = rollMode === 'over' ? 'under' : 'over';
                updateDiceDisplay();
                updateRollToggleIcon();
            });

            function updateRollToggleIcon() {
                const icon = rollToggleBtn.querySelector('svg');
                icon.style.transform = rollMode === 'under' ? 'rotate(180deg)' : 'rotate(0deg)';
            }

            // Dice Slider
            const diceSlider = document.getElementById('diceSlider');
            const multiplierInput = document.getElementById('multiplierInput');
            const winChanceInput = document.getElementById('winChanceInput');
            
            diceSlider.addEventListener('input', function() {
                const value = parseFloat(this.value);
                rollOverInput.value = value.toFixed(2);
                updateWinChanceAndMultiplier(value);
                updateDiceVisualization(value);
            });

            rollOverInput.addEventListener('input', function() {
                const value = Math.max(0.01, Math.min(98.99, parseFloat(this.value) || 0.01));
                this.value = value.toFixed(2);
                diceSlider.value = value;
                updateWinChanceAndMultiplier(value);
                updateDiceVisualization(value);
            });

            function updateWinChanceAndMultiplier(rollNumber) {
                let winChance;
                if (rollMode === 'over') {
                    winChance = 99 - rollNumber;
                } else {
                    winChance = rollNumber;
                }
                
                // Apply 1% house edge (99% instead of 100%)
                const multiplier = (99 / winChance).toFixed(4);
                
                winChanceInput.value = winChance.toFixed(4);
                multiplierInput.value = multiplier;
                
                updateProfitCalculation();
            }

            function updateDiceVisualization(rollNumber) {
                const lowerRange = document.getElementById('lowerRange');
                const higherRange = document.getElementById('higherRange');
                
                if (rollMode === 'over') {
                    lowerRange.style.width = rollNumber + '%';
                    higherRange.style.width = (99 - rollNumber) + '%';
                    lowerRange.innerHTML = `<span>0.00 - ${rollNumber.toFixed(2)}</span>`;
                    higherRange.innerHTML = `<span>${rollNumber.toFixed(2)} - 99.00</span>`;
                    
                    // Colors for over mode
                    lowerRange.style.background = '#e74c3c';
                    lowerRange.style.color = 'white';
                    higherRange.style.background = '#1FFF20';
                    higherRange.style.color = '#000';
                } else {
                    lowerRange.style.width = rollNumber + '%';
                    higherRange.style.width = (99 - rollNumber) + '%';
                    lowerRange.innerHTML = `<span>0.00 - ${rollNumber.toFixed(2)}</span>`;
                    higherRange.innerHTML = `<span>${rollNumber.toFixed(2)} - 99.00</span>`;
                    
                    // Swap colors for under mode
                    lowerRange.style.background = '#1FFF20';
                    lowerRange.style.color = '#000';
                    higherRange.style.background = '#e74c3c';
                    higherRange.style.color = 'white';
                }
            }

            function updateDiceDisplay() {
                const rollNumber = parseFloat(rollOverInput.value);
                updateWinChanceAndMultiplier(rollNumber);
                updateDiceVisualization(rollNumber);
            }

            // Amount buttons
            document.getElementById('halveButton').addEventListener('click', function() {
                const betAmountInput = document.getElementById('betAmount');
                const currentAmount = parseFloat(betAmountInput.value) || 0;
                betAmountInput.value = (currentAmount / 2).toFixed(8);
                updateProfitCalculation();
            });

            document.getElementById('doubleButton').addEventListener('click', function() {
                const betAmountInput = document.getElementById('betAmount');
                const currentAmount = parseFloat(betAmountInput.value) || 0;
                betAmountInput.value = (currentAmount * 2).toFixed(8);
                updateProfitCalculation();
            });

            // Bet amount input
            document.getElementById('betAmount').addEventListener('input', updateProfitCalculation);

            function updateProfitCalculation() {
                const betAmount = parseFloat(document.getElementById('betAmount').value) || 0;
                const multiplier = parseFloat(multiplierInput.value) || 1;
                const profit = betAmount * (multiplier - 1);
                
                document.getElementById('profitAmount').value = profit.toFixed(8);
                
                // Update conversion amounts (placeholder values)
                const usdRate = currentCurrency === 'usdt' ? 1 : (currentCurrency === 'btc' ? 45000 : 2500);
                document.getElementById('conversionAmount').textContent = `$${(betAmount * usdRate).toFixed(2)}`;
                document.getElementById('profitConversion').textContent = `$${(profit * usdRate).toFixed(2)}`;
            }

            // Place Bet
            document.getElementById('placeBetButton').addEventListener('click', function() {
                const betAmount = parseFloat(document.getElementById('betAmount').value);
                const rollNumber = parseFloat(rollOverInput.value);
                
                if (!betAmount || betAmount <= 0) {
                    showNotification('Please enter a valid bet amount', 'error');
                    return;
                }
                
                if (betAmount > currencyBalances[currentCurrency]) {
                    showNotification('Insufficient balance', 'error');
                    return;
                }
                
                placeDiceBet(betAmount, rollNumber, rollMode);
            });

            // Initialize with default values (49.5% win chance for house edge)
            diceSlider.value = 49.5;
            rollOverInput.value = '49.50';
            updateWinChanceAndMultiplier(49.5);
            updateDiceVisualization(49.5);
            updateProfitCalculation();
        }

        function placeDiceBet(amount, rollNumber, mode) {
            const diceContainer = document.querySelector('.dice-container');
            const diceResult = document.getElementById('diceResult');
            const button = document.getElementById('placeBetButton');
            
            button.disabled = true;
            button.textContent = 'Rolling...';
            
            diceContainer.classList.remove('is-hidden');
            diceResult.textContent = '?';
            diceResult.className = 'dice-result';
            
            // Get multiplier and win chance from inputs
            const multiplier = parseFloat(document.getElementById('multiplierInput').value);
            const winChance = parseFloat(document.getElementById('winChanceInput').value);
            
            // Prepare bet data for backend
            const betData = {
                amount: amount,
                target: rollNumber,
                condition: mode, // 'over' or 'under'
                demo_mode: isDemoMode,
                currency: currentCurrency,
                multiplier: multiplier,
                winChance: winChance,
                client_seed: `make_ai_${Date.now()}` // Custom client seed
            };
            
            // Log the bet attempt
            logActivity(`Placing ${isDemoMode ? 'demo' : 'REAL'} bet: ${amount} ${currentCurrency.toUpperCase()} ${mode} ${rollNumber}`);
            
            // Send bet to backend via socket
            if (socket && socket.connected) {
                socket.emit('place_dice_bet', betData);
            } else {
                // Fallback to local simulation if not connected
                setTimeout(() => {
                    const result = Math.random() * 99;
                    const isWin = (mode === 'over' && result > rollNumber) || (mode === 'under' && result < rollNumber);
                    
                    diceResult.textContent = result.toFixed(2);
                    diceResult.className = `dice-result ${isWin ? 'win' : 'loss'}`;
                    
                    // Update balance locally
                    if (isWin) {
                        const winAmount = amount * multiplier;
                        currencyBalances[currentCurrency] += (winAmount - amount);
                        logActivity(`WIN: ${result.toFixed(2)} | +${(winAmount - amount).toFixed(8)} ${currentCurrency.toUpperCase()}`);
                        showNotification(`Won ${(winAmount - amount).toFixed(8)} ${currentCurrency.toUpperCase()}!`, 'success');
                    } else {
                        currencyBalances[currentCurrency] -= amount;
                        logActivity(`LOSS: ${result.toFixed(2)} | -${amount.toFixed(8)} ${currentCurrency.toUpperCase()}`);
                        showNotification(`Lost ${amount.toFixed(8)} ${currentCurrency.toUpperCase()}`, 'error');
                    }
                    
                    updateCurrencyDisplay();
                    
                    button.disabled = false;
                    button.textContent = 'Place Bet';
                    
                    // Show offline warning
                    showNotification('Offline mode - results simulated locally', 'warning');
                }, 2000);
            }
            
            // Reset button after timeout regardless
            setTimeout(() => {
                button.disabled = false;
                if (button.textContent === 'Rolling...') {
                    button.textContent = 'Place Bet';
                }
            }, 10000); // 10 second timeout
        }

        // Seeds Management Functionality
        let currentSeeds = {
            clientSeed: '',
            serverSeedHash: '',
            nonce: 0,
            totalBets: 0,
            revealedServerSeed: ''
        };

        function initializeSeedsManagement() {
            // Button event listeners
            document.getElementById('updateSeedsBtn').addEventListener('click', updateSeeds);
            document.getElementById('calculateNextBtn').addEventListener('click', calculateNextNumbers);
            document.getElementById('verifySeedsBtn').addEventListener('click', verifySeeds);
            document.getElementById('clearSeedsBtn').addEventListener('click', clearSeeds);

            // Input validation and formatting
            const serverSeedHashInput = document.getElementById('serverSeedHash');
            serverSeedHashInput.addEventListener('input', function() {
                // Remove any non-hex characters and limit to 64 characters
                this.value = this.value.toLowerCase().replace(/[^0-9a-f]/g, '').substring(0, 64);
            });

            const clientSeedInput = document.getElementById('clientSeed');
            clientSeedInput.addEventListener('input', function() {
                // Update display immediately
                updateSeedsDisplay();
            });

            // Auto-increment nonce when bets are placed
            const originalPlaceDiceBet = window.placeDiceBet;
            window.placeDiceBet = function(...args) {
                // Increment nonce before placing bet
                if (currentSeeds.clientSeed && currentSeeds.serverSeedHash) {
                    currentSeeds.nonce++;
                    currentSeeds.totalBets++;
                    document.getElementById('nonceValue').value = currentSeeds.nonce;
                    document.getElementById('totalBetsMade').value = currentSeeds.totalBets;
                    updateSeedsDisplay();
                }
                return originalPlaceDiceBet.apply(this, args);
            };

            updateSeedsDisplay();
        }

        function updateSeeds() {
            const clientSeed = document.getElementById('clientSeed').value.trim();
            const serverSeedHash = document.getElementById('serverSeedHash').value.trim();
            const nonce = parseInt(document.getElementById('nonceValue').value) || 0;
            const revealedServerSeed = document.getElementById('revealedServerSeed').value.trim();

            // Validation
            if (!clientSeed) {
                showNotification('Please enter a client seed', 'error');
                return;
            }

            if (!serverSeedHash || serverSeedHash.length !== 64) {
                showNotification('Please enter a valid 64-character server seed hash', 'error');
                return;
            }

            // Update current seeds
            currentSeeds.clientSeed = clientSeed;
            currentSeeds.serverSeedHash = serverSeedHash;
            currentSeeds.nonce = nonce;
            currentSeeds.revealedServerSeed = revealedServerSeed;

            // Send to backend for processing
            if (socket && socket.connected) {
                socket.emit('update_session_seeds', currentSeeds);
            }

            updateSeedsDisplay();
            logActivity(`Seeds updated: Client="${clientSeed.substring(0, 8)}..." Hash="${serverSeedHash.substring(0, 8)}..." Nonce=${nonce}`);
            showNotification('Session seeds updated successfully', 'success');

            // Auto-calculate next numbers
            setTimeout(() => {
                calculateNextNumbers();
            }, 500);
        }

        function calculateNextNumbers() {
            if (!currentSeeds.clientSeed || !currentSeeds.serverSeedHash) {
                showNotification('Please enter client seed and server seed hash first', 'error');
                return;
            }

            const calculateBtn = document.getElementById('calculateNextBtn');
            calculateBtn.disabled = true;
            calculateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Calculating...';

            // Show HMAC results section
            document.getElementById('hmacResults').style.display = 'block';

            if (socket && socket.connected) {
                // Send calculation request to backend
                socket.emit('calculate_next_numbers', {
                    clientSeed: currentSeeds.clientSeed,
                    serverSeedHash: currentSeeds.serverSeedHash,
                    nonce: currentSeeds.nonce,
                    count: 5 // Calculate next 5 numbers
                });
            } else {
                // Local calculation fallback
                calculateHMACLocally();
            }

            setTimeout(() => {
                calculateBtn.disabled = false;
                calculateBtn.innerHTML = '<i class="fas fa-calculator"></i> Calculate Next Numbers';
            }, 2000);
        }

        function calculateHMACLocally() {
            try {
                // Use Web Crypto API for HMAC-SHA256 calculation
                const clientSeed = currentSeeds.clientSeed;
                const nonce = currentSeeds.nonce;
                
                // Create message for HMAC: clientSeed:nonce
                const message = `${clientSeed}:${nonce}`;
                
                // Display calculation info
                document.getElementById('hmacInput').textContent = message;
                
                // Note: In a real implementation, we'd need the actual server seed (not just hash)
                // For demonstration, we'll show how it would work
                document.getElementById('hmacOutput').textContent = 'Requires unhashed server seed for accurate calculation';
                document.getElementById('diceRollResult').textContent = 'Need server seed';
                document.getElementById('nextFiveRolls').textContent = 'Server seed required';
                
                // Update predictions with placeholder
                document.getElementById('nextCalculatedNumber').textContent = 'Pending';
                document.getElementById('seedConfidence').textContent = 'Low';
                
                logActivity('Local HMAC calculation - server seed hash only (need revealed seed for accuracy)');
                showNotification('Note: Accurate calculation requires the revealed server seed', 'warning');
                
            } catch (error) {
                console.error('HMAC calculation error:', error);
                showNotification('HMAC calculation failed', 'error');
            }
        }

        function verifySeeds() {
            if (!currentSeeds.revealedServerSeed) {
                showNotification('Please enter the revealed server seed for verification', 'error');
                return;
            }

            const verifyBtn = document.getElementById('verifySeedsBtn');
            verifyBtn.disabled = true;
            verifyBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Verifying...';

            if (socket && socket.connected) {
                socket.emit('verify_session_seeds', {
                    serverSeed: currentSeeds.revealedServerSeed,
                    serverSeedHash: currentSeeds.serverSeedHash,
                    clientSeed: currentSeeds.clientSeed,
                    nonce: currentSeeds.nonce
                });
            } else {
                // Local verification fallback
                setTimeout(() => {
                    // In a real implementation, we'd hash the revealed seed and compare
                    logActivity(`Seed verification attempted: Server="${currentSeeds.revealedServerSeed.substring(0, 8)}..."`);
                    showNotification('Offline mode - verification requires server connection', 'warning');
                    
                    verifyBtn.disabled = false;
                    verifyBtn.innerHTML = '<i class="fas fa-check-circle"></i> Verify Seeds';
                }, 1000);
                return;
            }

            setTimeout(() => {
                verifyBtn.disabled = false;
                verifyBtn.innerHTML = '<i class="fas fa-check-circle"></i> Verify Seeds';
            }, 3000);
        }

        function clearSeeds() {
            if (confirm('Are you sure you want to clear all session seeds?')) {
                currentSeeds = {
                    clientSeed: '',
                    serverSeedHash: '',
                    nonce: 0,
                    totalBets: 0,
                    revealedServerSeed: ''
                };

                // Clear input fields
                document.getElementById('clientSeed').value = '';
                document.getElementById('serverSeedHash').value = '';
                document.getElementById('nonceValue').value = 0;
                document.getElementById('totalBetsMade').value = 0;
                document.getElementById('revealedServerSeed').value = '';

                // Hide HMAC results
                document.getElementById('hmacResults').style.display = 'none';

                updateSeedsDisplay();
                logActivity('Session seeds cleared');
                showNotification('Session seeds cleared', 'info');

                // Notify backend
                if (socket && socket.connected) {
                    socket.emit('clear_session_seeds');
                }
            }
        }

        function updateSeedsDisplay() {
            const statusIndicator = document.getElementById('seedsStatus');
            const currentClientSeedEl = document.getElementById('currentClientSeed');
            const currentServerHashEl = document.getElementById('currentServerHash');
            const nextCalculatedNumberEl = document.getElementById('nextCalculatedNumber');
            const seedConfidenceEl = document.getElementById('seedConfidence');

            if (currentSeeds.clientSeed && currentSeeds.serverSeedHash) {
                statusIndicator.className = 'status-indicator status-online';
                currentClientSeedEl.textContent = currentSeeds.clientSeed;
                currentServerHashEl.textContent = currentSeeds.serverSeedHash;
                
                // Update confidence based on available data
                let confidence = 25; // Base confidence with hash only
                if (currentSeeds.revealedServerSeed) confidence = 95; // High confidence with revealed seed
                if (currentSeeds.nonce > 0) confidence += 10; // Additional confidence with nonce data
                
                seedConfidenceEl.textContent = Math.min(confidence, 100) + '%';
                
                // Enable betting interface enhancements
                enhanceBettingWithSeeds(true);
                
            } else {
                statusIndicator.className = 'status-indicator status-offline';
                currentClientSeedEl.textContent = 'Not set';
                currentServerHashEl.textContent = 'Not set';
                nextCalculatedNumberEl.textContent = '--';
                seedConfidenceEl.textContent = '0%';
                
                enhanceBettingWithSeeds(false);
            }
        }

        function enhanceBettingWithSeeds(enabled) {
            // Add visual indicators to betting interface when seeds are available
            const bettingInterface = document.querySelector('.betting-interface');
            if (enabled) {
                bettingInterface.style.borderColor = 'rgba(34, 197, 94, 0.4)';
                bettingInterface.style.boxShadow = '0 0 20px rgba(34, 197, 94, 0.1)';
                
                // Update predictions panel with enhanced accuracy indicator
                document.getElementById('predictionConfidence').style.background = '#22c55e';
                document.getElementById('recommendedBet').textContent = 'Enhanced with seeds';
                
            } else {
                bettingInterface.style.borderColor = 'rgba(59, 130, 246, 0.15)';
                bettingInterface.style.boxShadow = 'none';
                
                document.getElementById('predictionConfidence').style.background = 'linear-gradient(90deg, #3b82f6, #1d4ed8)';
            }
        }

        // Socket event handlers for seeds
        socket.on('seeds_updated', function(data) {
            if (data.success) {
                updateSeedsDisplay();
                logActivity('Seeds synchronized with AI engine');
            } else {
                showNotification('Failed to update seeds: ' + data.error, 'error');
            }
        });

        socket.on('numbers_calculated', function(data) {
            if (data.success) {
                // Update HMAC results display
                document.getElementById('hmacInput').textContent = data.hmacInput || '--';
                document.getElementById('hmacOutput').textContent = data.hmacOutput || '--';
                document.getElementById('diceRollResult').textContent = data.diceRoll || '--';
                document.getElementById('nextFiveRolls').textContent = data.nextRolls ? data.nextRolls.join(', ') : '--';
                
                // Update main prediction
                document.getElementById('nextCalculatedNumber').textContent = data.diceRoll || '--';
                document.getElementById('nextPrediction').textContent = data.diceRoll || '--';
                document.getElementById('predictionConfidence').style.width = '90%';
                
                logActivity(`HMAC calculation complete: Next roll = ${data.diceRoll}`);
                showNotification('Next numbers calculated using session seeds', 'success');
            } else {
                showNotification('Calculation failed: ' + data.error, 'error');
            }
        });

        socket.on('seeds_verified', function(data) {
            if (data.success) {
                if (data.isValid) {
                    showNotification(' Seeds verified successfully - provably fair!', 'success');
                    logActivity('Seeds verification: VALID - provably fair confirmed');
                    document.getElementById('seedConfidence').textContent = '100%';
                } else {
                    showNotification(' Seed verification failed - potential issue!', 'error');
                    logActivity('Seeds verification: INVALID - check seed accuracy');
                    document.getElementById('seedConfidence').textContent = '0%';
                }
            } else {
                showNotification('Verification error: ' + data.error, 'error');
            }
        });

        // Auto-populate seeds from image data (example from your screenshot)
        function populateExampleSeeds() {
            // Example from your image
            document.getElementById('clientSeed').value = 'A1EnyBArgu';
            document.getElementById('serverSeedHash').value = '1c3b4889e9411f47beb7d1149031d72a61e704911415922999e3579df87e3c8b';
            document.getElementById('nonceValue').value = 0;
            document.getElementById('totalBetsMade').value = 0;
            
            // Auto-update
            setTimeout(() => {
                updateSeeds();
            }, 100);
        }

        // Stake.com Rolling Results System
        let gameStats = {
            totalPlayed: 0,
            totalWon: 0,
            winPercentage: 0
        };

        let isRollUnder = false;
        let resultQueue = [];
        let maxRollingResults = 10;

        function addRollingResult(result, isWin) {
            const banner = document.getElementById('rollingResultsBanner');
            const container = document.getElementById('rollingResultsContainer');
            
            if (!banner || !container) return;
            
            // Create result bubble
            const bubble = document.createElement('div');
            bubble.className = `result-bubble ${isWin ? 'win' : 'loss'}`;
            bubble.textContent = result.toFixed(2);
            
            // Add to container
            container.appendChild(bubble);
            
            // Show banner if hidden
            if (banner.classList.contains('hidden')) {
                banner.classList.remove('hidden');
                banner.style.display = 'block';
            }
            
            // Remove excess bubbles
            while (container.children.length > maxRollingResults) {
                const firstChild = container.firstChild;
                firstChild.style.animation = 'slideOutLeft 0.5s ease-in-out forwards';
                setTimeout(() => {
                    if (firstChild.parentNode) {
                        firstChild.parentNode.removeChild(firstChild);
                    }
                }, 500);
            }
            
            // Trigger animation
            setTimeout(() => {
                bubble.style.animation = 'resultPop 0.6s ease-out forwards, scrollResults 8s linear forwards';
            }, 100);
        }

        function showToast(message, type = 'info', duration = 3000) {
            const toastContainer = document.getElementById('toastContainer');
            if (!toastContainer) return;
            
            // Create toast
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            
            // Get appropriate icon
            let icon = 'fas fa-info-circle';
            switch(type) {
                case 'success': icon = 'fas fa-check-circle'; break;
                case 'error': icon = 'fas fa-exclamation-circle'; break;
                case 'warning': icon = 'fas fa-exclamation-triangle'; break;
                case 'win': icon = 'fas fa-trophy'; break;
                case 'loss': icon = 'fas fa-times-circle'; break;
            }
            
            toast.innerHTML = `
                <i class="${icon}"></i>
                <span>${message}</span>
                <button class="toast-close" onclick="this.parentElement.remove()"></button>
            `;
            
            // Add to container
            toastContainer.appendChild(toast);
            
            // Auto-remove after duration
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.style.animation = 'slideOutRight 0.3s ease-in forwards';
                    setTimeout(() => {
                        if (toast.parentNode) {
                            toast.parentNode.removeChild(toast);
                        }
                    }, 300);
                }
            }, duration);
        }

        function updateStakeGameStats() {
            const totalPlayedEl = document.getElementById('totalPlayed');
            const totalWonEl = document.getElementById('totalWon');
            const winPercentageEl = document.getElementById('winPercentage');
            
            if (totalPlayedEl) totalPlayedEl.textContent = gameStats.totalPlayed;
            if (totalWonEl) totalWonEl.textContent = gameStats.totalWon;
            if (winPercentageEl) {
                winPercentageEl.textContent = 
                    gameStats.totalPlayed > 0 ? ((gameStats.totalWon / gameStats.totalPlayed) * 100).toFixed(1) + '%' : '0%';
            }
        }

        function addStakeGameHistory(result, isWin, multiplier) {
            const historyContainer = document.getElementById('stakeGameHistory');
            if (!historyContainer) return;
            
            const bubble = document.createElement('div');
            bubble.className = `game-history-bubble ${isWin ? 'win' : 'loss'}`;
            bubble.innerHTML = `
                <div class="history-result">${result.toFixed(2)}</div>
                <div class="history-multiplier">${multiplier.toFixed(2)}</div>
            `;
            
            historyContainer.insertBefore(bubble, historyContainer.firstChild);
            
            // Remove excess history items
            while (historyContainer.children.length > 20) {
                historyContainer.removeChild(historyContainer.lastChild);
            }
        }

        function updateStakeDiceCalculations() {
            const rollOverEl = document.getElementById('stakeRollOver');
            const stakeWinChanceEl = document.getElementById('stakeWinChance');
            const stakeMultiplierEl = document.getElementById('stakeMultiplier');
            const stakeWinChanceDisplayEl = document.getElementById('stakeWinChanceDisplay');
            const stakeProfitDisplayEl = document.getElementById('stakeProfitDisplay');
            const stakePayoutDisplayEl = document.getElementById('stakePayoutDisplay');
            
            if (!rollOverEl || !stakeWinChanceEl || !stakeMultiplierEl) return;
            
            const rollOver = parseFloat(rollOverEl.value);
            
            let winChance;
            if (isRollUnder) {
                winChance = rollOver - 1;
            } else {
                winChance = 100 - rollOver;
            }
            
            // Ensure win chance is within bounds
            winChance = Math.max(1, Math.min(98, winChance));
            
            const multiplier = (99 / winChance);
            const betAmount = parseFloat(document.getElementById('stakeBetAmount').value) || 0;
            const profit = betAmount * (multiplier - 1);
            const payout = betAmount * multiplier;
            
            stakeWinChanceEl.value = winChance.toFixed(2);
            stakeMultiplierEl.value = multiplier.toFixed(4);
            
            if (stakeWinChanceDisplayEl) stakeWinChanceDisplayEl.textContent = winChance.toFixed(2) + '%';
            if (stakeProfitDisplayEl) stakeProfitDisplayEl.textContent = profit.toFixed(8) + ' USDT';
            if (stakePayoutDisplayEl) stakePayoutDisplayEl.textContent = payout.toFixed(8) + ' USDT';
            
            // Update slider
            const slider = document.getElementById('stakeSlider');
            if (slider) slider.value = rollOver;
            
            // Update range visualization
            const rangeFillUnder = document.getElementById('rangeFillUnder');
            const rangeFillOver = document.getElementById('rangeFillOver');
            
            if (rangeFillUnder && rangeFillOver) {
                if (isRollUnder) {
                    rangeFillUnder.style.width = `${rollOver}%`;
                    rangeFillOver.style.width = `${100 - rollOver}%`;
                } else {
                    rangeFillUnder.style.width = `${rollOver}%`;
                    rangeFillOver.style.width = `${100 - rollOver}%`;
                }
            }
        }

        function adjustStakeBetAmount(factor) {
            const currentAmount = parseFloat(document.getElementById('stakeBetAmount').value) || 0;
            const newAmount = currentAmount * factor;
            document.getElementById('stakeBetAmount').value = newAmount.toFixed(8);
            updateStakeDiceCalculations();
        }

        function setStakeBetAmount(amount) {
            document.getElementById('stakeBetAmount').value = amount.toFixed(8);
            updateStakeDiceCalculations();
        }

        function setMaxStakeBetAmount() {
            // For demo purposes, set a reasonable max
            document.getElementById('stakeBetAmount').value = '1.00000000';
            updateStakeDiceCalculations();
        }

        function executeStakeDiceBet() {
            const betAmountEl = document.getElementById('stakeBetAmount');
            const rollOverEl = document.getElementById('stakeRollOver');
            const multiplierEl = document.getElementById('stakeMultiplier');
            
            if (!betAmountEl || !rollOverEl || !multiplierEl) {
                showToast('Betting interface not properly initialized', 'error');
                return;
            }
            
            const betAmount = parseFloat(betAmountEl.value);
            const rollOver = parseFloat(rollOverEl.value);
            const multiplier = parseFloat(multiplierEl.value);
            
            if (!betAmount || betAmount <= 0) {
                showToast('Please enter a valid bet amount', 'error');
                return;
            }
            
            // Disable bet button
            const playButton = document.getElementById('stakePlayButton');
            if (playButton) {
                playButton.disabled = true;
                playButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Rolling...';
            }
            
            // Get prediction if available
            let prediction = null;
            if (window.ai_processor && window.ai_processor.get_prediction) {
                try {
                    prediction = window.ai_processor.get_prediction();
                } catch (error) {
                    console.log('No AI prediction available:', error);
                }
            }
            
            // Simulate dice roll (replace with actual API call)
            setTimeout(() => {
                // Generate result (for demo - replace with actual API)
                const result = Math.random() * 100;
                
                // Determine win/loss
                let isWin = false;
                if (isRollUnder) {
                    isWin = result < rollOver;
                } else {
                    isWin = result > rollOver;
                }
                
                // Update stats
                gameStats.totalPlayed++;
                if (isWin) {
                    gameStats.totalWon++;
                }
                
                // Show result
                const liveResultNumber = document.getElementById('liveResultNumber');
                const liveResultOutcome = document.getElementById('liveResultOutcome');
                const liveResultDisplay = document.getElementById('liveResultDisplay');
                
                if (liveResultNumber) liveResultNumber.textContent = result.toFixed(2);
                if (liveResultOutcome) liveResultOutcome.textContent = isWin ? 'WIN' : 'LOSS';
                if (liveResultDisplay) {
                    liveResultDisplay.style.display = 'block';
                    liveResultDisplay.style.color = isWin ? '#1FFF20' : '#ef4444';
                }
                
                // Add to rolling results
                addRollingResult(result, isWin);
                
                // Add to game history
                addStakeGameHistory(result, isWin, multiplier);
                
                // Update stats display
                updateStakeGameStats();
                
                // Show toast notification
                if (isWin) {
                    const profit = betAmount * (multiplier - 1);
                    showToast(`You won ${profit.toFixed(8)} USDT!`, 'win', 4000);
                } else {
                    showToast(`You lost ${betAmount.toFixed(8)} USDT`, 'loss', 3000);
                }
                
                // Emit result to backend
                if (socket && socket.connected) {
                    socket.emit('dice_result', {
                        result: result,
                        isWin: isWin,
                        betAmount: betAmount,
                        multiplier: multiplier,
                        rollOver: rollOver,
                        isRollUnder: isRollUnder,
                        prediction: prediction
                    });
                }
                
                // Re-enable bet button
                if (playButton) {
                    playButton.disabled = false;
                    playButton.innerHTML = '<i class="fas fa-play"></i> Bet';
                }
                
            }, 1000);
        }

        // Event Listeners for Stake Interface
        function initializeStakeInterface() {
            // Slider control with bidirectional sync
            const stakeSlider = document.getElementById('stakeSlider');
            const stakeRollOver = document.getElementById('stakeRollOver');
            
            if (stakeSlider) {
                stakeSlider.addEventListener('input', function() {
                    const value = parseFloat(this.value);
                    if (stakeRollOver) {
                        stakeRollOver.value = value.toFixed(2);
                        // Add visual feedback
                        this.style.background = `linear-gradient(to right, #4CAF50 0%, #4CAF50 ${(value/99)*100}%, #ddd ${(value/99)*100}%, #ddd 100%)`;
                    }
                    updateStakeDiceCalculations();
                    
                    // Update API values if connected
                    updateAPIValues({
                        rollOver: value,
                        timestamp: Date.now()
                    });
                });
            }
            
            // Roll over input with slider sync
            if (stakeRollOver) {
                stakeRollOver.addEventListener('input', function() {
                    const value = parseFloat(this.value);
                    if (stakeSlider && value >= 1 && value <= 99) {
                        stakeSlider.value = value;
                        // Update slider background
                        stakeSlider.style.background = `linear-gradient(to right, #4CAF50 0%, #4CAF50 ${(value/99)*100}%, #ddd ${(value/99)*100}%, #ddd 100%)`;
                    }
                    updateStakeDiceCalculations();
                    
                    // Update API values
                    updateAPIValues({
                        rollOver: value,
                        timestamp: Date.now()
                    });
                });
            }
            
            // Bet amount input with validation and API sync
            const stakeBetAmount = document.getElementById('stakeBetAmount');
            if (stakeBetAmount) {
                stakeBetAmount.addEventListener('input', function() {
                    const value = parseFloat(this.value);
                    
                    // Validate bet amount
                    if (value < 0) {
                        this.value = '';
                        showSeedNotification('Bet amount cannot be negative', 'error');
                        return;
                    }
                    
                    updateStakeDiceCalculations();
                    
                    // Update API values
                    updateAPIValues({
                        betAmount: value,
                        timestamp: Date.now()
                    });
                });
                
                // Format on blur
                stakeBetAmount.addEventListener('blur', function() {
                    const value = parseFloat(this.value);
                    if (!isNaN(value)) {
                        this.value = value.toFixed(8);
                    }
                });
            }
            
            // Initialize slider background
            if (stakeSlider) {
                const initialValue = parseFloat(stakeSlider.value);
                stakeSlider.style.background = `linear-gradient(to right, #4CAF50 0%, #4CAF50 ${(initialValue/99)*100}%, #ddd ${(initialValue/99)*100}%, #ddd 100%)`;
            }
        }
        
        // Recent Results Management
        let recentResults = [];
        const MAX_RECENT_RESULTS = 50;
        
        function addRecentResult(result) {
            const resultData = {
                id: Date.now() + Math.random(),
                roll: result.roll || Math.floor(Math.random() * 100),
                target: result.target || 50,
                isWin: result.isWin || (result.roll > result.target),
                amount: result.amount || 0,
                profit: result.profit || 0,
                timestamp: result.timestamp || Date.now(),
                condition: result.condition || 'over'
            };
            
            // Add to beginning of array
            recentResults.unshift(resultData);
            
            // Keep only MAX_RECENT_RESULTS
            if (recentResults.length > MAX_RECENT_RESULTS) {
                recentResults = recentResults.slice(0, MAX_RECENT_RESULTS);
            }
            
            // Update display
            updateRecentResultsDisplay();
            
            // Save to localStorage
            localStorage.setItem('recentResults', JSON.stringify(recentResults));
        }
        
        function updateRecentResultsDisplay() {
            const historyContainer = document.getElementById('stakeGameHistory');
            if (!historyContainer) return;
            
            historyContainer.innerHTML = '';
            
            recentResults.slice(0, 20).forEach((result, index) => {
                const resultBubble = document.createElement('div');
                resultBubble.style.cssText = `
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 11px;
                    font-weight: bold;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    animation: slideInRight 0.5s ease-out ${index * 0.05}s both;
                    ${result.isWin ? 
                        'background: linear-gradient(135deg, #4CAF50, #45a049); color: white;' : 
                        'background: linear-gradient(135deg, #f44336, #e53935); color: white;'
                    }
                `;
                
                resultBubble.textContent = result.roll.toFixed(0);
                resultBubble.title = `Roll: ${result.roll.toFixed(2)} | Target: ${result.target.toFixed(2)} | ${result.isWin ? 'WIN' : 'LOSS'} | ${result.isWin ? '+' : ''}${result.profit.toFixed(4)}`;
                
                // Add hover effect
                resultBubble.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.1)';
                    this.style.zIndex = '10';
                });
                
                resultBubble.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                    this.style.zIndex = '1';
                });
                
                historyContainer.appendChild(resultBubble);
            });
            
            // Add slide-in animation styles if not exists
            if (!document.getElementById('recentResultsStyles')) {
                const style = document.createElement('style');
                style.id = 'recentResultsStyles';
                style.textContent = `
                    @keyframes slideInRight {
                        from { 
                            transform: translateX(50px); 
                            opacity: 0; 
                        }
                        to { 
                            transform: translateX(0); 
                            opacity: 1; 
                        }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        function loadStoredResults() {
            const stored = localStorage.getItem('recentResults');
            if (stored) {
                try {
                    recentResults = JSON.parse(stored);
                    updateRecentResultsDisplay();
                } catch (e) {
                    console.log('Could not load stored results:', e);
                    recentResults = [];
                }
            }
        }
        
        function clearRecentResults() {
            recentResults = [];
            updateRecentResultsDisplay();
            localStorage.removeItem('recentResults');
            showSeedNotification('Recent results cleared', 'success');
        }
        
        // Add some demo results if none exist
        function initializeRecentResults() {
            loadStoredResults();
            
            if (recentResults.length === 0) {
                // Add some demo results
                const demoResults = [
                    { roll: 67.43, target: 50, isWin: true, amount: 0.001, profit: 0.0009, condition: 'over' },
                    { roll: 23.12, target: 50, isWin: false, amount: 0.001, profit: -0.001, condition: 'over' },
                    { roll: 89.67, target: 50, isWin: true, amount: 0.002, profit: 0.0018, condition: 'over' },
                    { roll: 12.34, target: 50, isWin: false, amount: 0.001, profit: -0.001, condition: 'over' },
                    { roll: 78.90, target: 50, isWin: true, amount: 0.0015, profit: 0.00135, condition: 'over' }
                ];
                
                demoResults.forEach((result, index) => {
                    setTimeout(() => addRecentResult(result), index * 200);
                });
            }
        }
            
            // Roll toggle button
            const stakeRollToggle = document.getElementById('stakeRollToggle');
            if (stakeRollToggle) {
                stakeRollToggle.addEventListener('click', function() {
                    isRollUnder = !isRollUnder;
                    this.style.transform = isRollUnder ? 'rotate(180deg)' : 'rotate(0deg)';
                    updateStakeDiceCalculations();
                });
            }
            
            // Play button
            const stakePlayButton = document.getElementById('stakePlayButton');
            if (stakePlayButton) {
                stakePlayButton.addEventListener('click', executeStakeDiceBet);
            }
            
            // Amount buttons
            const halfBtn = document.getElementById('halfBtn');
            const doubleBtn = document.getElementById('doubleBtn');
            const minBtn = document.getElementById('minBtn');
            const maxBtn = document.getElementById('maxBtn');
            
            // Initial calculations
            updateStakeDiceCalculations();
        }

        // Override showNotification to use new toast system
        const originalShowNotification = window.showNotification;
        window.showNotification = function(message, type, duration = 3000) {
            // Map original types to new toast types
            const typeMap = {
                'success': 'success',
                'error': 'error',
                'warning': 'warning',
                'info': 'info'
            };
            
            showToast(message, typeMap[type] || 'info', duration);
        };

        // Initialize betting interface when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initBettingInterface();
            initializeSeedsManagement();
            initializeStakeInterface(); // Add new Stake interface initialization
            initializeDemoAnalysisSystem(); // Add demo analysis system
            initializeCurrencyDropdown(); // Initialize currency dropdown
            initializeRecentResults(); // Initialize recent results system
            
            // Generate initial client seed if not present
            const clientSeedInput = document.getElementById('clientSeed');
            if (clientSeedInput && !clientSeedInput.value) {
                generateNewSeed('client');
            }
            
            // Update nonce display
            const nonceElement = document.getElementById('nonceValue');
            if (nonceElement && !nonceElement.textContent) {
                nonceElement.textContent = '0';
            }
            
            // Load balances from server after a short delay
            setTimeout(() => {
                loadBalancesFromServer();
            }, 1000);
            
            // Start periodic balance sync
            setInterval(() => {
                if (socket && socket.connected) {
                    requestLiveUpdate();
                }
            }, 60000); // Every minute
        });

        // Update API values function (moved here to fix syntax)
        function updateAPIValues(values) {
            // Emit to backend if socket is connected
            if (typeof socket !== 'undefined' && socket && socket.connected) {
                socket.emit('update_betting_values', values);
            }
            
            // Update local storage for persistence
            const currentValues = JSON.parse(localStorage.getItem('bettingValues') || '{}');
            Object.assign(currentValues, values);
            localStorage.setItem('bettingValues', JSON.stringify(currentValues));
            
            // Show visual feedback for successful update
            if (values.rollOver !== undefined || values.betAmount !== undefined) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    padding: 8px 16px;
                    background: rgba(76, 175, 80, 0.9);
                    color: white;
                    border-radius: 3px;
                    z-index: 10000;
                    font-size: 12px;
                    pointer-events: none;
                `;
                notification.textContent = ' Values synced';
                
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 1500);
            }
        }

        // Demo Analysis System
        let demoAnalysisState = {
            isAnalyzing: false,
            progress: 0,
            demoComplete: false,
            isDemoMode: true
        };

        function initializeDemoAnalysisSystem() {
            // Mode toggle handler
            const demoModeToggle = document.getElementById('demoModeToggle');
            if (demoModeToggle) {
                demoModeToggle.addEventListener('change', handleModeToggle);
            }

            // Demo analysis button
            const startDemoBtn = document.getElementById('startDemoAnalysis');
            if (startDemoBtn) {
                startDemoBtn.addEventListener('click', startDemoAnalysis);
            }

            // Auto Oracle buttons
            const startAutoBtn = document.getElementById('startAutoOracle');
            const stopAutoBtn = document.getElementById('stopAutoOracle');
            
            if (startAutoBtn) {
                startAutoBtn.addEventListener('click', startAutoOracle);
            }
            
            if (stopAutoBtn) {
                stopAutoBtn.addEventListener('click', stopAutoOracle);
            }

            // Advanced GUI button
            const advancedBtn = document.getElementById('openAdvancedGUI');
            if (advancedBtn) {
                advancedBtn.addEventListener('click', openAdvancedGUI);
            }

            // Initialize mode status
            updateModeStatus();
        }

        function handleModeToggle() {
            const demoModeToggle = document.getElementById('demoModeToggle');
            const isDemoMode = demoModeToggle.checked;
            
            demoAnalysisState.isDemoMode = isDemoMode;
            
            // Send mode change to backend
            fetch('/api/demo/toggle-mode', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ demo_mode: isDemoMode })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    updateModeStatus();
                    showToast(data.message, 'success');
                }
            })
            .catch(error => {
                console.error('Mode toggle error:', error);
                showToast('Failed to toggle mode', 'error');
            });
        }

        function updateModeStatus() {
            const modeStatus = document.getElementById('modeStatus');
            const modeIcon = modeStatus.querySelector('i');
            const modeText = modeStatus.querySelector('span');
            
            if (demoAnalysisState.isDemoMode) {
                modeIcon.className = 'fas fa-shield-alt';
                modeText.textContent = 'Demo Mode Active - Safe Testing';
                modeStatus.style.color = '#10b981';
            } else {
                modeIcon.className = 'fas fa-exclamation-triangle';
                modeText.textContent = 'REAL MODE - Live Trading';
                modeStatus.style.color = '#ef4444';
            }
        }

        function startDemoAnalysis() {
            if (demoAnalysisState.isAnalyzing) {
                showToast('Demo analysis already in progress', 'warning');
                return;
            }

            // Show progress section
            const demoProgress = document.getElementById('demoProgress');
            const startBtn = document.getElementById('startDemoAnalysis');
            
            if (demoProgress) {
                demoProgress.style.display = 'block';
            }
            
            if (startBtn) {
                startBtn.disabled = true;
                startBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';
            }

            // Reset progress
            demoAnalysisState.isAnalyzing = true;
            demoAnalysisState.progress = 0;
            updateDemoProgress(0);

            // Start analysis
            fetch('/api/demo/start', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showToast('Demo analysis started - collecting 100 rolls', 'success');
                    
                    // Start progress monitoring
                    const progressInterval = setInterval(() => {
                        checkDemoProgress(progressInterval);
                    }, 1000);
                }
            })
            .catch(error => {
                console.error('Demo analysis error:', error);
                showToast('Failed to start demo analysis', 'error');
                resetDemoAnalysisUI();
            });
        }

        function checkDemoProgress(intervalId) {
            fetch('/api/demo/status')
            .then(response => response.json())
            .then(data => {
                if (data.is_analyzing) {
                    updateDemoProgress(data.progress);
                    updateDemoAnalysisDetails(data);
                } else if (data.demo_complete) {
                    clearInterval(intervalId);
                    completeDemoAnalysis();
                }
            })
            .catch(error => {
                console.error('Progress check error:', error);
                clearInterval(intervalId);
                resetDemoAnalysisUI();
            });
        }

        function updateDemoProgress(progress) {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            
            if (progressFill) {
                progressFill.style.width = `${progress}%`;
            }
            
            if (progressText) {
                progressText.textContent = `${progress}/100`;
            }
            
            // Update roll count
            const demoRollsCount = document.getElementById('demoRollsCount');
            if (demoRollsCount) {
                demoRollsCount.textContent = `${progress} / 100`;
            }
        }

        function updateDemoAnalysisDetails(data) {
            const current = data.current_analysis || {};
            
            // Update HMAC patterns
            const hmacPatterns = document.getElementById('hmacPatterns');
            if (hmacPatterns && current.entropy !== undefined) {
                const entropyLevel = current.entropy > 0.8 ? 'Strong' : current.entropy > 0.6 ? 'Medium' : 'Weak';
                hmacPatterns.textContent = `${entropyLevel} Patterns`;
            }
            
            // Update seed analysis
            const seedAnalysis = document.getElementById('seedAnalysis');
            if (seedAnalysis && current.rolls_analyzed > 0) {
                seedAnalysis.textContent = `${current.rolls_analyzed} rolls processed`;
            }
            
            // Update bias direction
            const biasDirection = document.getElementById('biasDirection');
            if (biasDirection && current.bias_direction) {
                const biasStrength = Math.abs(current.current_bias || 0) * 100;
                biasDirection.textContent = `${current.bias_direction.toUpperCase()} (${biasStrength.toFixed(1)}%)`;
            }
            
            // Update pattern confidence
            const patternConfidence = document.getElementById('patternConfidence');
            if (patternConfidence && data.confidence !== undefined) {
                patternConfidence.textContent = `${Math.round(data.confidence)}%`;
            }
        }

        function completeDemoAnalysis() {
            demoAnalysisState.isAnalyzing = false;
            demoAnalysisState.demoComplete = true;
            
            // Show completion
            showToast('Demo analysis complete! Oracle ready for activation.', 'success');
            
            // Update UI
            const startBtn = document.getElementById('startDemoAnalysis');
            const startAutoBtn = document.getElementById('startAutoOracle');
            
            if (startBtn) {
                startBtn.style.display = 'none';
            }
            
            if (startAutoBtn) {
                startAutoBtn.style.display = 'inline-flex';
            }
            
            // Hide progress
            const demoProgress = document.getElementById('demoProgress');
            if (demoProgress) {
                setTimeout(() => {
                    demoProgress.style.display = 'none';
                }, 2000);
            }
        }

        function resetDemoAnalysisUI() {
            const startBtn = document.getElementById('startDemoAnalysis');
            const demoProgress = document.getElementById('demoProgress');
            
            if (startBtn) {
                startBtn.disabled = false;
                startBtn.innerHTML = '<i class="fas fa-search"></i> Start Demo Analysis (100 Rolls)';
            }
            
            if (demoProgress) {
                demoProgress.style.display = 'none';
            }
            
            demoAnalysisState.isAnalyzing = false;
        }

        function startAutoOracle() {
            if (!demoAnalysisState.demoComplete) {
                showToast('Please complete demo analysis first', 'warning');
                return;
            }
            
            // Switch button visibility
            const startAutoBtn = document.getElementById('startAutoOracle');
            const stopAutoBtn = document.getElementById('stopAutoOracle');
            
            if (startAutoBtn) startAutoBtn.style.display = 'none';
            if (stopAutoBtn) stopAutoBtn.style.display = 'inline-flex';
            
            // Start auto betting logic here
            showToast('Auto Oracle activated - AI betting started', 'success');
        }

        function stopAutoOracle() {
            // Switch button visibility
            const startAutoBtn = document.getElementById('startAutoOracle');
            const stopAutoBtn = document.getElementById('stopAutoOracle');
            
            if (startAutoBtn) startAutoBtn.style.display = 'inline-flex';
            if (stopAutoBtn) stopAutoBtn.style.display = 'none';
            
            showToast('Auto Oracle stopped', 'info');
        }

        function openAdvancedGUI() {
            // This will open the advanced Oracle GUI (to be created next)
            showToast('Opening Advanced Oracle GUI...', 'info');
        }

        // Socket event handlers for demo analysis
        if (socket) {
            socket.on('demo_analysis_complete', function(data) {
                console.log('Demo analysis complete:', data);
                completeDemoAnalysis();
                
                if (data.recommendations) {
                    showToast(`Analysis complete: ${data.recommendations.strategy} strategy recommended`, 'success');
                }
            });
        }
    </script>
</body>
</html>